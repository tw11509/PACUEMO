!function(a,b){a(function(){"use strict";function a(a){for(var b in a)o.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function c(a,b){for(var c in a)if(o.call(a,c)&&a[c].test(b))return c;return null}function d(a,b){var c,d,e,f,g=m.props;if(o.call(g,a))for(c=g[a],e=c.length,d=0;e>d;++d)if(f=c[d].exec(b),null!==f)return f[1];return null}function e(a,b){var c=d(a,b);return c?f(c):0/0}function f(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)}function g(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function h(a){return n.fullPattern.test(a)||n.shortPattern.test(a.substr(0,4))}function i(a,d,e){if(a.mobile===b){var f,g,i;return(g=c(m.tablets,d))?(a.mobile=a.tablet=g,a.phone=null,void 0):(f=c(m.phones,d))?(a.mobile=a.phone=f,a.tablet=null,void 0):(h(d)?(i=k.isPhoneSized(e),i===b?a.mobile=a.tablet=a.phone=r:i?(a.mobile=a.phone=p,a.tablet=null):(a.mobile=a.tablet=q,a.phone=null)):a.mobile=a.tablet=a.phone=null,void 0)}}function j(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile")<=5.2?"C":"C"}function k(a,b){this.ua=a||"",this._cache={},this.maxPhoneWidth=b||650}var l,m={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell.*Streak|Dell.*Aero|Dell.*Venue|DELL.*Venue Pro|Dell Flash|Dell Smoke|Dell Mini 3iX|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925",Samsung:"Samsung|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo 3DS",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)|^.*Android.*Nexus(?:(?!Mobile).)*$",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-I9205|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE)\\b",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD",LenovoTablet:"Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"bq.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant)|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9",JXDTablet:"Android.*\\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"\\(Linux;\\sAndroid\\s[\\d\\.]+;\\s[PXGAT]\\d{2,}.*\\sBuild/.*?\\)",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",Hudl:"Hudl HT7S3",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",Tizen:"Tizen",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:"Firefox/[VER]",Fennec:"Fennec/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]","UC Browser":"UC Browser[VER]",MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",iOS:" \\bOS\\b [VER] ",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Bot:"Googlebot|YandexBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|facebookexternalhit",MobileBot:"Googlebot-Mobile|YahooSeeker/M1A1-R2D2",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},n={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i},o=Object.prototype.hasOwnProperty,p="UnknownPhone",q="UnknownTablet",r="UnknownMobile";return l="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var b,c,d,e,f,g;for(b in m.props)if(o.call(m.props,b)){for(c=m.props[b],l(c)||(c=[c]),f=c.length,e=0;f>e;++e)d=c[e],g=d.indexOf("[VER]"),g>=0&&(d=d.substring(0,g)+"([\\w._\\+]+)"+d.substring(g+5)),c[e]=new RegExp(d,"i");m.props[b]=c}a(m.oss),a(m.phones),a(m.tablets),a(m.uas),a(m.utils)}(),k.prototype={constructor:k,mobile:function(){return i(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return i(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return i(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===b&&(this._cache.userAgent=c(m.uas,this.ua)),this._cache.userAgent},os:function(){return this._cache.os===b&&(this._cache.os=c(m.oss,this.ua)),this._cache.os},version:function(a){return e(a,this.ua)},versionStr:function(a){return d(a,this.ua)},is:function(a){return g(a,this.userAgent())||g(a,this.os())||g(a,this.phone())||g(a,this.tablet())||g(a,c(m.utils,this.ua))},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return k.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===b&&(this._cache.grade=j(this)),this._cache.grade}},k.isPhoneSized="undefined"!=typeof window&&window.screen&&window.screen.width?function(a){if(0>a)return b;var c=window.screen.width,d=window.devicePixelRatio||1,e=c/d;return a>=e}:function(){},k})}(function(){if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof module&&module.exports)return function(a){module.exports=a()};if("undefined"!=typeof window)return function(a){window.MobileDetect=a()};throw new Error("unknown environment")}());
(function(window,Modernizr){"use strict";var md=new MobileDetect(navigator.userAgent),grade=md.mobileGrade();Modernizr.addTest({mobile:!!md.mobile(),phone:!!md.phone(),tablet:!!md.tablet(),mobilegradea:grade==="A"});window.mobileDetect=md})(window,Modernizr);
(function($){var o=$({});$.subscribe=function(){o.on.apply(o,arguments)};$.unsubscribe=function(){o.off.apply(o,arguments)};$.publish=function(){o.trigger.apply(o,arguments)}})(jQuery);
if(typeof jQuery==="undefined"){throw new Error("Bootstrap's JavaScript requires jQuery")}+function($){"use strict";var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||version[0]==1&&version[1]==9&&version[2]<1){throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}}(jQuery);+function($){"use strict";function transitionEnd(){var el=document.createElement("bootstrap");var transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames){if(el.style[name]!==undefined){return{end:transEndEventNames[name]}}}return false}$.fn.emulateTransitionEnd=function(duration){var called=false;var $el=this;$(this).one("bsTransitionEnd",function(){called=true});var callback=function(){if(!called)$($el).trigger($.support.transition.end)};setTimeout(callback,duration);return this};$(function(){$.support.transition=transitionEnd();if(!$.support.transition)return;$.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){if($(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}})}(jQuery);+function($){"use strict";var dismiss='[data-dismiss="alert"]';var Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.4";Alert.TRANSITION_DURATION=150;Alert.prototype.close=function(e){var $this=$(this);var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=$(selector);if(e)e.preventDefault();if(!$parent.length){$parent=$this.closest(".alert")}$parent.trigger(e=$.Event("close.bs.alert"));if(e.isDefaultPrevented())return;$parent.removeClass("in");function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement()};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.alert");if(!data)$this.data("bs.alert",data=new Alert(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.alert;$.fn.alert=Plugin;$.fn.alert.Constructor=Alert;$.fn.alert.noConflict=function(){$.fn.alert=old;return this};$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery);+function($){"use strict";var Button=function(element,options){this.$element=$(element);this.options=$.extend({},Button.DEFAULTS,options);this.isLoading=false};Button.VERSION="3.3.4";Button.DEFAULTS={loadingText:"loading..."};Button.prototype.setState=function(state){var d="disabled";var $el=this.$element;var val=$el.is("input")?"val":"html";var data=$el.data();state=state+"Text";if(data.resetText==null)$el.data("resetText",$el[val]());setTimeout($.proxy(function(){$el[val](data[state]==null?this.options[state]:data[state]);if(state=="loadingText"){this.isLoading=true;$el.addClass(d).attr(d,d)}else if(this.isLoading){this.isLoading=false;$el.removeClass(d).removeAttr(d)}},this),0)};Button.prototype.toggle=function(){var changed=true;var $parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");if($input.prop("type")=="radio"){if($input.prop("checked")&&this.$element.hasClass("active"))changed=false;else $parent.find(".active").removeClass("active")}if(changed)$input.prop("checked",!this.$element.hasClass("active")).trigger("change")}else{this.$element.attr("aria-pressed",!this.$element.hasClass("active"))}if(changed)this.$element.toggleClass("active")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.button");var options=typeof option=="object"&&option;if(!data)$this.data("bs.button",data=new Button(this,options));if(option=="toggle")data.toggle();else if(option)data.setState(option)})}var old=$.fn.button;$.fn.button=Plugin;$.fn.button.Constructor=Button;$.fn.button.noConflict=function(){$.fn.button=old;return this};$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target);if(!$btn.hasClass("btn"))$btn=$btn.closest(".btn");Plugin.call($btn,"toggle");e.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery);+function($){"use strict";var Carousel=function(element,options){this.$element=$(element);this.$indicators=this.$element.find(".carousel-indicators");this.options=options;this.paused=null;this.sliding=null;this.interval=null;this.$active=null;this.$items=null;this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this));this.options.pause=="hover"&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.4";Carousel.TRANSITION_DURATION=600;Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:true,keyboard:true};Carousel.prototype.keydown=function(e){if(/input|textarea/i.test(e.target.tagName))return;switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()};Carousel.prototype.cycle=function(e){e||(this.paused=false);this.interval&&clearInterval(this.interval);this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval));return this};Carousel.prototype.getItemIndex=function(item){this.$items=item.parent().children(".item");return this.$items.index(item||this.$active)};Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active);var willWrap=direction=="prev"&&activeIndex===0||direction=="next"&&activeIndex==this.$items.length-1;if(willWrap&&!this.options.wrap)return active;var delta=direction=="prev"?-1:1;var itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)};Carousel.prototype.to=function(pos){var that=this;var activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(pos>this.$items.length-1||pos<0)return;if(this.sliding)return this.$element.one("slid.bs.carousel",function(){that.to(pos)});if(activeIndex==pos)return this.pause().cycle();return this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))};Carousel.prototype.pause=function(e){e||(this.paused=true);if(this.$element.find(".next, .prev").length&&$.support.transition){this.$element.trigger($.support.transition.end);this.cycle(true)}this.interval=clearInterval(this.interval);return this};Carousel.prototype.next=function(){if(this.sliding)return;return this.slide("next")};Carousel.prototype.prev=function(){if(this.sliding)return;return this.slide("prev")};Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active");var $next=next||this.getItemForDirection(type,$active);var isCycling=this.interval;var direction=type=="next"?"left":"right";var that=this;if($next.hasClass("active"))return this.sliding=false;var relatedTarget=$next[0];var slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});this.$element.trigger(slideEvent);if(slideEvent.isDefaultPrevented())return;this.sliding=true;isCycling&&this.pause();if(this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if($.support.transition&&this.$element.hasClass("slide")){$next.addClass(type);$next[0].offsetWidth;$active.addClass(direction);$next.addClass(direction);$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active");$active.removeClass(["active",direction].join(" "));that.sliding=false;setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)}else{$active.removeClass("active");$next.addClass("active");this.sliding=false;this.$element.trigger(slidEvent)}isCycling&&this.cycle();return this};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.carousel");var options=$.extend({},Carousel.DEFAULTS,$this.data(),typeof option=="object"&&option);var action=typeof option=="string"?option:options.slide;if(!data)$this.data("bs.carousel",data=new Carousel(this,options));if(typeof option=="number")data.to(option);else if(action)data[action]();else if(options.interval)data.pause().cycle()})}var old=$.fn.carousel;$.fn.carousel=Plugin;$.fn.carousel.Constructor=Carousel;$.fn.carousel.noConflict=function(){$.fn.carousel=old;return this};var clickHandler=function(e){var href;var $this=$(this);var $target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if(!$target.hasClass("carousel"))return;var options=$.extend({},$target.data(),$this.data());var slideIndex=$this.attr("data-slide-to");if(slideIndex)options.interval=false;Plugin.call($target,options);if(slideIndex){$target.data("bs.carousel").to(slideIndex)}e.preventDefault()};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler);$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery);+function($){"use strict";var Collapse=function(element,options){this.$element=$(element);this.options=$.extend({},Collapse.DEFAULTS,options);this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],'+'[data-toggle="collapse"][data-target="#'+element.id+'"]');this.transitioning=null;if(this.options.parent){this.$parent=this.getParent()}else{this.addAriaAndCollapsedClass(this.$element,this.$trigger)}if(this.options.toggle)this.toggle()};Collapse.VERSION="3.3.4";Collapse.TRANSITION_DURATION=350;Collapse.DEFAULTS={toggle:true};Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"};Collapse.prototype.show=function(){if(this.transitioning||this.$element.hasClass("in"))return;var activesData;var actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(actives&&actives.length){activesData=actives.data("bs.collapse");if(activesData&&activesData.transitioning)return}var startEvent=$.Event("show.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;if(actives&&actives.length){Plugin.call(actives,"hide");activesData||actives.data("bs.collapse",null)}var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",true);this.$trigger.removeClass("collapsed").attr("aria-expanded",true);this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension]("");this.transitioning=0;this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])};Collapse.prototype.hide=function(){if(this.transitioning||!this.$element.hasClass("in"))return;var startEvent=$.Event("hide.bs.collapse");this.$element.trigger(startEvent);if(startEvent.isDefaultPrevented())return;var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight;this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",false);this.$trigger.addClass("collapsed").attr("aria-expanded",false);this.transitioning=1;var complete=function(){this.transitioning=0;this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!$.support.transition)return complete.call(this);this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)};Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()};Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen);$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};function getTargetFromTrigger($trigger){var href;var target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.collapse");var options=$.extend({},Collapse.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("bs.collapse",data=new Collapse(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.collapse;$.fn.collapse=Plugin;$.fn.collapse.Constructor=Collapse;$.fn.collapse.noConflict=function(){$.fn.collapse=old;return this};$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);if(!$this.attr("data-target"))e.preventDefault();var $target=getTargetFromTrigger($this);var data=$target.data("bs.collapse");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);+function($){"use strict";var backdrop=".dropdown-backdrop";var toggle='[data-toggle="dropdown"]';var Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.4";Dropdown.prototype.toggle=function(e){var $this=$(this);if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");clearMenus();if(!isActive){if("ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length){$('<div class="dropdown-backdrop"/>').insertAfter($(this)).on("click",clearMenus)}var relatedTarget={relatedTarget:this};$parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true");$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget)}return false};Dropdown.prototype.keydown=function(e){if(!/(38|40|27|32)/.test(e.which)||/input|textarea/i.test(e.target.tagName))return;var $this=$(this);e.preventDefault();e.stopPropagation();if($this.is(".disabled, :disabled"))return;var $parent=getParent($this);var isActive=$parent.hasClass("open");if(!isActive&&e.which!=27||isActive&&e.which==27){if(e.which==27)$parent.find(toggle).trigger("focus");return $this.trigger("click")}var desc=" li:not(.disabled):visible a";var $items=$parent.find('[role="menu"]'+desc+', [role="listbox"]'+desc);if(!$items.length)return;var index=$items.index(e.target);if(e.which==38&&index>0)index--;if(e.which==40&&index<$items.length-1)index++;if(!~index)index=0;$items.eq(index).trigger("focus")};function clearMenus(e){if(e&&e.which===3)return;$(backdrop).remove();$(toggle).each(function(){var $this=$(this);var $parent=getParent($this);var relatedTarget={relatedTarget:this};if(!$parent.hasClass("open"))return;$parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget));if(e.isDefaultPrevented())return;$this.attr("aria-expanded","false");$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget)})}function getParent($this){var selector=$this.attr("data-target");if(!selector){selector=$this.attr("href");selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,"")}var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.dropdown");if(!data)$this.data("bs.dropdown",data=new Dropdown(this));if(typeof option=="string")data[option].call($this)})}var old=$.fn.dropdown;$.fn.dropdown=Plugin;$.fn.dropdown.Constructor=Dropdown;$.fn.dropdown.noConflict=function(){$.fn.dropdown=old;return this};$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',Dropdown.prototype.keydown)}(jQuery);+function($){"use strict";var Modal=function(element,options){this.options=options;this.$body=$(document.body);this.$element=$(element);this.$dialog=this.$element.find(".modal-dialog");this.$backdrop=null;this.isShown=null;this.originalBodyPad=null;this.scrollbarWidth=0;this.ignoreBackdropClick=false;if(this.options.remote){this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))}};Modal.VERSION="3.3.4";Modal.TRANSITION_DURATION=300;Modal.BACKDROP_TRANSITION_DURATION=150;Modal.DEFAULTS={backdrop:true,keyboard:true,show:true};Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)};Modal.prototype.show=function(_relatedTarget){var that=this;var e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e);if(this.isShown||e.isDefaultPrevented())return;this.isShown=true;this.checkScrollbar();this.setScrollbar();this.$body.addClass("modal-open");this.escape();this.resize();this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this));this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){if($(e.target).is(that.$element))that.ignoreBackdropClick=true})});this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");if(!that.$element.parent().length){that.$element.appendTo(that.$body)}that.$element.show().scrollTop(0);that.adjustDialog();if(transition){that.$element[0].offsetWidth}that.$element.addClass("in").attr("aria-hidden",false);that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)})};Modal.prototype.hide=function(e){if(e)e.preventDefault();e=$.Event("hide.bs.modal");this.$element.trigger(e);if(!this.isShown||e.isDefaultPrevented())return;this.isShown=false;this.escape();this.resize();$(document).off("focusin.bs.modal");this.$element.removeClass("in").attr("aria-hidden",true).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal");this.$dialog.off("mousedown.dismiss.bs.modal");$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal()};Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){if(this.$element[0]!==e.target&&!this.$element.has(e.target).length){this.$element.trigger("focus")}},this))};Modal.prototype.escape=function(){if(this.isShown&&this.options.keyboard){this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){e.which==27&&this.hide()},this))}else if(!this.isShown){this.$element.off("keydown.dismiss.bs.modal")}};Modal.prototype.resize=function(){if(this.isShown){$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this))}else{$(window).off("resize.bs.modal")}};Modal.prototype.hideModal=function(){var that=this;this.$element.hide();this.backdrop(function(){that.$body.removeClass("modal-open");that.resetAdjustments();that.resetScrollbar();that.$element.trigger("hidden.bs.modal")})};Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null};Modal.prototype.backdrop=function(callback){var that=this;var animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;this.$backdrop=$('<div class="modal-backdrop '+animate+'" />').appendTo(this.$body);this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){if(this.ignoreBackdropClick){this.ignoreBackdropClick=false;return}if(e.target!==e.currentTarget)return;this.options.backdrop=="static"?this.$element[0].focus():this.hide()},this));if(doAnimate)this.$backdrop[0].offsetWidth;this.$backdrop.addClass("in");if(!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop();callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else if(callback){callback()}};Modal.prototype.handleUpdate=function(){this.adjustDialog()};Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})};Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})};Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth;this.scrollbarWidth=this.measureScrollbar()};Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"";if(this.bodyIsOverflowing)this.$body.css("padding-right",bodyPad+this.scrollbarWidth)};Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)};Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure";this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;this.$body[0].removeChild(scrollDiv);return scrollbarWidth};function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this);var data=$this.data("bs.modal");var options=$.extend({},Modal.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data)$this.data("bs.modal",data=new Modal(this,options));if(typeof option=="string")data[option](_relatedTarget);else if(options.show)data.show(_relatedTarget)})}var old=$.fn.modal;$.fn.modal=Plugin;$.fn.modal.Constructor=Modal;$.fn.modal.noConflict=function(){$.fn.modal=old;return this};$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this);var href=$this.attr("href");var $target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,""));var option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());if($this.is("a"))e.preventDefault();$target.one("show.bs.modal",function(showEvent){if(showEvent.isDefaultPrevented())return;$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})});Plugin.call($target,option,this)})}(jQuery);+function($){"use strict";var Tooltip=function(element,options){this.type=null;this.options=null;this.enabled=null;this.timeout=null;this.hoverState=null;this.$element=null;this.init("tooltip",element,options)};Tooltip.VERSION="3.3.4";Tooltip.TRANSITION_DURATION=150;Tooltip.DEFAULTS={animation:true,placement:"top",selector:false,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false,viewport:{selector:"body",padding:0}};Tooltip.prototype.init=function(type,element,options){this.enabled=true;this.type=type;this.$element=$(element);this.options=this.getOptions(options);this.$viewport=this.options.viewport&&$(this.options.viewport.selector||this.options.viewport);if(this.$element[0]instanceof document.constructor&&!this.options.selector){throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!")}var triggers=this.options.trigger.split(" ");for(var i=triggers.length;i--;){var trigger=triggers[i];if(trigger=="click"){this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this))}else if(trigger!="manual"){var eventIn=trigger=="hover"?"mouseenter":"focusin";var eventOut=trigger=="hover"?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this));this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()};Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS};Tooltip.prototype.getOptions=function(options){options=$.extend({},this.getDefaults(),this.$element.data(),options);if(options.delay&&typeof options.delay=="number"){options.delay={show:options.delay,hide:options.delay}}return options};Tooltip.prototype.getDelegateOptions=function(){var options={};var defaults=this.getDefaults();this._options&&$.each(this._options,function(key,value){if(defaults[key]!=value)options[key]=value});return options};Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(self&&self.$tip&&self.$tip.is(":visible")){self.hoverState="in";return}if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}clearTimeout(self.timeout);self.hoverState="in";if(!self.options.delay||!self.options.delay.show)return self.show();self.timeout=setTimeout(function(){if(self.hoverState=="in")self.show()},self.options.delay.show)};Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(obj.currentTarget,this.getDelegateOptions());$(obj.currentTarget).data("bs."+this.type,self)}clearTimeout(self.timeout);self.hoverState="out";if(!self.options.delay||!self.options.delay.hide)return self.hide();self.timeout=setTimeout(function(){if(self.hoverState=="out")self.hide()},self.options.delay.hide)};Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this;var $tip=this.tip();var tipId=this.getUID(this.type);this.setContent();$tip.attr("id",tipId);this.$element.attr("aria-describedby",tipId);if(this.options.animation)$tip.addClass("fade");var placement=typeof this.options.placement=="function"?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement;var autoToken=/\s?auto?\s?/i;var autoPlace=autoToken.test(placement);if(autoPlace)placement=placement.replace(autoToken,"")||"top";$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this);this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element);var pos=this.getPosition();var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement;var $container=this.options.container?$(this.options.container):this.$element.parent();var containerDim=this.getPosition($container);placement=placement=="bottom"&&pos.bottom+actualHeight>containerDim.bottom?"top":placement=="top"&&pos.top-actualHeight<containerDim.top?"bottom":placement=="right"&&pos.right+actualWidth>containerDim.width?"left":placement=="left"&&pos.left-actualWidth<containerDim.left?"right":placement;$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type);that.hoverState=null;if(prevHoverState=="out")that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}};Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip();var width=$tip[0].offsetWidth;var height=$tip[0].offsetHeight;var marginTop=parseInt($tip.css("margin-top"),10);var marginLeft=parseInt($tip.css("margin-left"),10);if(isNaN(marginTop))marginTop=0;if(isNaN(marginLeft))marginLeft=0;offset.top=offset.top+marginTop;offset.left=offset.left+marginLeft;$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0);$tip.addClass("in");var actualWidth=$tip[0].offsetWidth;var actualHeight=$tip[0].offsetHeight;if(placement=="top"&&actualHeight!=height){offset.top=offset.top+height-actualHeight}var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);if(delta.left)offset.left+=delta.left;else offset.top+=delta.top;var isVertical=/top|bottom/.test(placement);var arrowDelta=isVertical?delta.left*2-width+actualWidth:delta.top*2-height+actualHeight;var arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset);this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)};Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")};Tooltip.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title);$tip.removeClass("fade in top bottom left right")};Tooltip.prototype.hide=function(callback){var that=this;var $tip=$(this.$tip);var e=$.Event("hide.bs."+this.type);function complete(){if(that.hoverState!="in")$tip.detach();that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type);callback&&callback()}this.$element.trigger(e);if(e.isDefaultPrevented())return;$tip.removeClass("in");$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete();this.hoverState=null;return this};Tooltip.prototype.fixTitle=function(){var $e=this.$element;if($e.attr("title")||typeof $e.attr("data-original-title")!="string"){$e.attr("data-original-title",$e.attr("title")||"").attr("title","")}};Tooltip.prototype.hasContent=function(){return this.getTitle()};Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0];var isBody=el.tagName=="BODY";var elRect=el.getBoundingClientRect();if(elRect.width==null){elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top})}var elOffset=isBody?{top:0,left:0}:$element.offset();var scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()};var outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)
};Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return placement=="bottom"?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:placement=="top"?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:placement=="left"?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}};Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0;var viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll;var bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;if(topEdgeOffset<viewportDimensions.top){delta.top=viewportDimensions.top-topEdgeOffset}else if(bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height){delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset}}else{var leftEdgeOffset=pos.left-viewportPadding;var rightEdgeOffset=pos.left+viewportPadding+actualWidth;if(leftEdgeOffset<viewportDimensions.left){delta.left=viewportDimensions.left-leftEdgeOffset}else if(rightEdgeOffset>viewportDimensions.width){delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset}}return delta};Tooltip.prototype.getTitle=function(){var title;var $e=this.$element;var o=this.options;title=$e.attr("data-original-title")||(typeof o.title=="function"?o.title.call($e[0]):o.title);return title};Tooltip.prototype.getUID=function(prefix){do prefix+=~~(Math.random()*1e6);while(document.getElementById(prefix));return prefix};Tooltip.prototype.tip=function(){return this.$tip=this.$tip||$(this.options.template)};Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")};Tooltip.prototype.enable=function(){this.enabled=true};Tooltip.prototype.disable=function(){this.enabled=false};Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled};Tooltip.prototype.toggle=function(e){var self=this;if(e){self=$(e.currentTarget).data("bs."+this.type);if(!self){self=new this.constructor(e.currentTarget,this.getDelegateOptions());$(e.currentTarget).data("bs."+this.type,self)}}self.tip().hasClass("in")?self.leave(self):self.enter(self)};Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout);this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type)})};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tooltip");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.tooltip",data=new Tooltip(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.tooltip;$.fn.tooltip=Plugin;$.fn.tooltip.Constructor=Tooltip;$.fn.tooltip.noConflict=function(){$.fn.tooltip=old;return this}}(jQuery);+function($){"use strict";var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.4";Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'});Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype);Popover.prototype.constructor=Popover;Popover.prototype.getDefaults=function(){return Popover.DEFAULTS};Popover.prototype.setContent=function(){var $tip=this.tip();var title=this.getTitle();var content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title);$tip.find(".popover-content").children().detach().end()[this.options.html?typeof content=="string"?"html":"append":"text"](content);$tip.removeClass("fade top bottom left right in");if(!$tip.find(".popover-title").html())$tip.find(".popover-title").hide()};Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()};Popover.prototype.getContent=function(){var $e=this.$element;var o=this.options;return $e.attr("data-content")||(typeof o.content=="function"?o.content.call($e[0]):o.content)};Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.popover");var options=typeof option=="object"&&option;if(!data&&/destroy|hide/.test(option))return;if(!data)$this.data("bs.popover",data=new Popover(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.popover;$.fn.popover=Plugin;$.fn.popover.Constructor=Popover;$.fn.popover.noConflict=function(){$.fn.popover=old;return this}}(jQuery);+function($){"use strict";function ScrollSpy(element,options){this.$body=$(document.body);this.$scrollElement=$(element).is(document.body)?$(window):$(element);this.options=$.extend({},ScrollSpy.DEFAULTS,options);this.selector=(this.options.target||"")+" .nav li > a";this.offsets=[];this.targets=[];this.activeTarget=null;this.scrollHeight=0;this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this));this.refresh();this.process()}ScrollSpy.VERSION="3.3.4";ScrollSpy.DEFAULTS={offset:10};ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)};ScrollSpy.prototype.refresh=function(){var that=this;var offsetMethod="offset";var offsetBase=0;this.offsets=[];this.targets=[];this.scrollHeight=this.getScrollHeight();if(!$.isWindow(this.$scrollElement[0])){offsetMethod="position";offsetBase=this.$scrollElement.scrollTop()}this.$body.find(this.selector).map(function(){var $el=$(this);var href=$el.data("target")||$el.attr("href");var $href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]);that.targets.push(this[1])})};ScrollSpy.prototype.process=function(){var scrollTop=this.$scrollElement.scrollTop()+this.options.offset;var scrollHeight=this.getScrollHeight();var maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height();var offsets=this.offsets;var targets=this.targets;var activeTarget=this.activeTarget;var i;if(this.scrollHeight!=scrollHeight){this.refresh()}if(scrollTop>=maxScroll){return activeTarget!=(i=targets[targets.length-1])&&this.activate(i)}if(activeTarget&&scrollTop<offsets[0]){this.activeTarget=null;return this.clear()}for(i=offsets.length;i--;){activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(offsets[i+1]===undefined||scrollTop<offsets[i+1])&&this.activate(targets[i])}};ScrollSpy.prototype.activate=function(target){this.activeTarget=target;this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]';var active=$(selector).parents("li").addClass("active");if(active.parent(".dropdown-menu").length){active=active.closest("li.dropdown").addClass("active")}active.trigger("activate.bs.scrollspy")};ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.scrollspy");var options=typeof option=="object"&&option;if(!data)$this.data("bs.scrollspy",data=new ScrollSpy(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.scrollspy;$.fn.scrollspy=Plugin;$.fn.scrollspy.Constructor=ScrollSpy;$.fn.scrollspy.noConflict=function(){$.fn.scrollspy=old;return this};$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery);+function($){"use strict";var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.4";Tab.TRANSITION_DURATION=150;Tab.prototype.show=function(){var $this=this.element;var $ul=$this.closest("ul:not(.dropdown-menu)");var selector=$this.data("target");if(!selector){selector=$this.attr("href");selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")}if($this.parent("li").hasClass("active"))return;var $previous=$ul.find(".active:last a");var hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]});var showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});$previous.trigger(hideEvent);$this.trigger(showEvent);if(showEvent.isDefaultPrevented()||hideEvent.isDefaultPrevented())return;var $target=$(selector);this.activate($this.closest("li"),$ul);this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]});$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})};Tab.prototype.activate=function(element,container,callback){var $active=container.find("> .active");var transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",false);element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",true);if(transition){element[0].offsetWidth;element.addClass("in")}else{element.removeClass("fade")}if(element.parent(".dropdown-menu").length){element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",true)}callback&&callback()}$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next();$active.removeClass("in")};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.tab");if(!data)$this.data("bs.tab",data=new Tab(this));if(typeof option=="string")data[option]()})}var old=$.fn.tab;$.fn.tab=Plugin;$.fn.tab.Constructor=Tab;$.fn.tab.noConflict=function(){$.fn.tab=old;return this};var clickHandler=function(e){e.preventDefault();Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery);+function($){"use strict";var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options);this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this));this.$element=$(element);this.affixed=null;this.unpin=null;this.pinnedOffset=null;this.checkPosition()};Affix.VERSION="3.3.4";Affix.RESET="affix affix-top affix-bottom";Affix.DEFAULTS={offset:0,target:window};Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop();var position=this.$element.offset();var targetHeight=this.$target.height();if(offsetTop!=null&&this.affixed=="top")return scrollTop<offsetTop?"top":false;if(this.affixed=="bottom"){if(offsetTop!=null)return scrollTop+this.unpin<=position.top?false:"bottom";return scrollTop+targetHeight<=scrollHeight-offsetBottom?false:"bottom"}var initializing=this.affixed==null;var colliderTop=initializing?scrollTop:position.top;var colliderHeight=initializing?targetHeight:height;if(offsetTop!=null&&scrollTop<=offsetTop)return"top";if(offsetBottom!=null&&colliderTop+colliderHeight>=scrollHeight-offsetBottom)return"bottom";return false};Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop();var position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop};Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)};Affix.prototype.checkPosition=function(){if(!this.$element.is(":visible"))return;var height=this.$element.height();var offset=this.options.offset;var offsetTop=offset.top;var offsetBottom=offset.bottom;var scrollHeight=$(document.body).height();if(typeof offset!="object")offsetBottom=offsetTop=offset;if(typeof offsetTop=="function")offsetTop=offset.top(this.$element);if(typeof offsetBottom=="function")offsetBottom=offset.bottom(this.$element);var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){if(this.unpin!=null)this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:"");var e=$.Event(affixType+".bs.affix");this.$element.trigger(e);if(e.isDefaultPrevented())return;this.affixed=affix;this.unpin=affix=="bottom"?this.getPinnedOffset():null;this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}if(affix=="bottom"){this.$element.offset({top:scrollHeight-height-offsetBottom})}};function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("bs.affix");var options=typeof option=="object"&&option;if(!data)$this.data("bs.affix",data=new Affix(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.affix;$.fn.affix=Plugin;$.fn.affix.Constructor=Affix;$.fn.affix.noConflict=function(){$.fn.affix=old;return this};$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this);var data=$spy.data();data.offset=data.offset||{};if(data.offsetBottom!=null)data.offset.bottom=data.offsetBottom;if(data.offsetTop!=null)data.offset.top=data.offsetTop;Plugin.call($spy,data)})})}(jQuery);+function($){"use strict";var SidePanel=function(element,options){var isForcedHamburgerMode=$("html, body").hasClass("force-hamburger");this.options=$.extend({},SidePanel.DEFAULTS,options);this.isVisible=false;this.$element=$(element);this.$navbarHeader=$(element).siblings(".navbar-header");this.$container=this.$element.parents(".navbar");this.$toggle=this.$navbarHeader.find(".navbar-toggle");this.animationEndEvent=_whichAnimationEndEvent();$(window).resize(function(){if(this.isVisible&&window.innerWidth>=SidePanel.TOGGLE_BREAKPOINT&&!isForcedHamburgerMode){this.hide({skipAnimation:true})}else if(this.isVisible){this.setDimensions()}}.bind(this));this.setDimensions();if(this.options.toggle)this.toggle()};SidePanel.TOGGLE_BREAKPOINT=992;SidePanel.MOBILE_BREAKPOINT=480;SidePanel.DESKTOP_WIDTH=400;SidePanel.MOBILE_WIDTH=270;SidePanel.SIDEPANEL_PADDING=38;SidePanel.CLOSE_DURATION=270;SidePanel.MENU_ITEM_ANIMATION_DELAY=17;SidePanel.DEFAULTS={};SidePanel.prototype.setDimensions=function(){var navbarWidth=this._getNavBarWidth();var navScrollHeight=this.$element.find(".nav")[0].scrollHeight;var navBranding=this.$element.find(".navbar-brand").parent();var toggleGutter;if(this.$toggleClone){toggleGutter=window.innerWidth-this.$toggleClone.position().left}else{toggleGutter=window.innerWidth-this.$toggle.position().left}if(_isTouchDevice()){this.$element.css({width:"100%"});this.$element.css("overflow","hidden").height();this.$element.css("overflow","auto")}else{if(navScrollHeight+navBranding.outerHeight(true)+SidePanel.SIDEPANEL_PADDING<window.innerHeight){navBranding.addClass("fixed-bottom")}else{navBranding.removeClass("fixed-bottom")}if(window.innerWidth>=SidePanel.MOBILE_BREAKPOINT){this.$element.css({width:toggleGutter+SidePanel.DESKTOP_WIDTH+"px"})}else{this.$element.css({width:toggleGutter+SidePanel.MOBILE_WIDTH+"px"})}}if(this.$toggleClone){var curLeftPos=this.$toggle.position().left;this.$toggleClone.css({left:curLeftPos+"px",top:0})}};SidePanel.prototype.toggle=function(){this[this.isVisible?"hide":"show"]()};SidePanel.prototype.show=function(){if(this.isTransitioning){return}this.isVisible=true;this.$toggle.removeClass("collapsed");$("body").addClass("sidepanel-active");this.$container.addClass("navbar-sidepanel");if(!this.$element.find(".navbar-brand").length){this._generateBrand()}if(this.animationEndEvent){this.$element.find("li a, .divider").each(function(i,e){$(e).css({"animation-delay":i*SidePanel.MENU_ITEM_ANIMATION_DELAY+"ms"})})}this.$container.prepend('<div class="sidepanel-backdrop"></div>');this.$container.on("click.sp.sidepanel",".sidepanel-backdrop",function(){this.hide()}.bind(this));if(this.animationEndEvent){this.$element.one(this.animationEndEvent,function(){this.isTransitioning=false;this.$element.removeClass("animate-in");this.$element.addClass("open")}.bind(this));this.isTransitioning=true;this.$element.addClass("animate-in")}else{this.$element.addClass("open")}this.setDimensions();if(this.$container.css("position")!=="fixed"){var curLeftPos=this.$toggle.position().left;this.$toggleClone=this.$toggle.clone();this.$toggle.css({opacity:0});this.$toggleClone.css({display:"none",position:"fixed",left:curLeftPos+"px",top:0});this.$toggle.after(this.$toggleClone);this.$toggleClone.show()}};SidePanel.prototype.hide=function(options){var options=options||{};if(this.isTransitioning){return}this.isVisible=false;this.$toggle.addClass("collapsed");if(this.$toggleClone){this.$toggleClone.remove();this.$toggle.css({opacity:1});delete this.$toggleClone}if(this.animationEndEvent&&!options.skipAnimation){this.$element.one(this.animationEndEvent,function(){this.isTransitioning=false;this.$element.removeClass("animate-out");complete.call(this,null)}.bind(this));this.isTransitioning=true;this.$container.find(".sidepanel-backdrop").fadeOut(SidePanel.CLOSE_DURATION);this.$element.addClass("animate-out")}else{complete.call(this,null)}function complete(){this.$container.find("._generated-nav-brand").remove();this.$container.find(".sidepanel-backdrop").remove();this.$element.css({width:"auto"}).removeClass("open");this.$container.removeClass("navbar-sidepanel");$("body").removeClass("sidepanel-active")}};SidePanel.prototype._getNavBarWidth=function(){return this.$element.outerWidth(true)};SidePanel.prototype._generateBrand=function(){var currentTitleBrand=this.$container.find(".navbar-brand").clone();var brandListItem=$('<li class="_generated-nav-brand">').append(currentTitleBrand);this.$element.find(".nav").append(brandListItem)};function _whichAnimationEndEvent(){var a;var el=document.createElement("fakeelement");var animationEndEvents={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in animationEndEvents){if(el.style[a]!==undefined){return animationEndEvents[a]}}}function _isTouchDevice(){return"ontouchstart"in window||"onmsgesturechange"in window}function Plugin(option){return this.each(function(){var $this=$(this);var data=$this.data("sp.sidepanel");var options=$.extend({},SidePanel.DEFAULTS,$this.data(),typeof option=="object"&&option);if(!data&&options.toggle&&/show|hide/.test(option))options.toggle=false;if(!data)$this.data("sp.sidepanel",data=new SidePanel(this,options));if(typeof option=="string")data[option]()})}var old=$.fn.spSidepanel;$.fn.spSidepanel=Plugin;$.fn.spSidepanel.Constructor=SidePanel;$.fn.spSidepanel.noConflict=function(){$.fn.spSidepanel=old;return this};$(document).off("click.sp.sidepanel").on("click.sp.sidepanel","[data-toggle=sidepanel]",function(e){var $this=$(this);if(!$this.attr("data-target")){e.preventDefault()}var $target=$($this.attr("data-target"));var data=$target.data("sp.sidepanel");var option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery);
function FastClick(layer,options){"use strict";var oldOnClick;options=options||{};this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=options.touchBoundary||10;this.layer=layer;this.tapDelay=options.tapDelay||200;if(FastClick.notNeeded(layer)){return}function bind(method,context){return function(){return method.apply(context,arguments)}}var methods=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"];var context=this;for(var i=0,l=methods.length;i<l;i++){context[methods[i]]=bind(context[methods[i]],context)}if(deviceIsAndroid){layer.addEventListener("mouseover",this.onMouse,true);layer.addEventListener("mousedown",this.onMouse,true);layer.addEventListener("mouseup",this.onMouse,true)}layer.addEventListener("click",this.onClick,true);layer.addEventListener("touchstart",this.onTouchStart,false);layer.addEventListener("touchmove",this.onTouchMove,false);layer.addEventListener("touchend",this.onTouchEnd,false);layer.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){layer.removeEventListener=function(type,callback,capture){var rmv=Node.prototype.removeEventListener;if(type==="click"){rmv.call(layer,type,callback.hijacked||callback,capture)}else{rmv.call(layer,type,callback,capture)}};layer.addEventListener=function(type,callback,capture){var adv=Node.prototype.addEventListener;if(type==="click"){adv.call(layer,type,callback.hijacked||(callback.hijacked=function(event){if(!event.propagationStopped){callback(event)}}),capture)}else{adv.call(layer,type,callback,capture)}}}if(typeof layer.onclick==="function"){oldOnClick=layer.onclick;layer.addEventListener("click",function(event){oldOnClick(event)},false);layer.onclick=null}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;var deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);var deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent);var deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);var deviceIsBlackBerry10=navigator.userAgent.indexOf("BB10")>0;FastClick.prototype.needsClick=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(target.disabled){return true}break;case"input":if(deviceIsIOS&&target.type==="file"||target.disabled){return true}break;case"label":case"video":return true}return/\bneedsclick\b/.test(target.className)};FastClick.prototype.needsFocus=function(target){"use strict";switch(target.nodeName.toLowerCase()){case"textarea":return true;case"select":return!deviceIsAndroid;case"input":switch(target.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return!target.disabled&&!target.readOnly;default:return/\bneedsfocus\b/.test(target.className)}};FastClick.prototype.sendClick=function(targetElement,event){"use strict";var clickEvent,touch;if(document.activeElement&&document.activeElement!==targetElement){document.activeElement.blur()}touch=event.changedTouches[0];clickEvent=document.createEvent("MouseEvents");clickEvent.initMouseEvent(this.determineEventType(targetElement),true,true,window,1,touch.screenX,touch.screenY,touch.clientX,touch.clientY,false,false,false,false,0,null);clickEvent.forwardedTouchEvent=true;targetElement.dispatchEvent(clickEvent)};FastClick.prototype.determineEventType=function(targetElement){"use strict";if(deviceIsAndroid&&targetElement.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};FastClick.prototype.focus=function(targetElement){"use strict";var length;if(deviceIsIOS&&targetElement.setSelectionRange&&targetElement.type.indexOf("date")!==0&&targetElement.type!=="time"){length=targetElement.value.length;targetElement.setSelectionRange(length,length)}else{targetElement.focus()}};FastClick.prototype.updateScrollParent=function(targetElement){"use strict";var scrollParent,parentElement;scrollParent=targetElement.fastClickScrollParent;if(!scrollParent||!scrollParent.contains(targetElement)){parentElement=targetElement;do{if(parentElement.scrollHeight>parentElement.offsetHeight){scrollParent=parentElement;targetElement.fastClickScrollParent=parentElement;break}parentElement=parentElement.parentElement}while(parentElement)}if(scrollParent){scrollParent.fastClickLastScrollTop=scrollParent.scrollTop}};FastClick.prototype.getTargetElementFromEventTarget=function(eventTarget){"use strict";if(eventTarget.nodeType===Node.TEXT_NODE){return eventTarget.parentNode}return eventTarget};FastClick.prototype.onTouchStart=function(event){"use strict";var targetElement,touch,selection;if(event.targetTouches.length>1){return true}targetElement=this.getTargetElementFromEventTarget(event.target);touch=event.targetTouches[0];if(deviceIsIOS){selection=window.getSelection();if(selection.rangeCount&&!selection.isCollapsed){return true}if(!deviceIsIOS4){if(touch.identifier&&touch.identifier===this.lastTouchIdentifier){event.preventDefault();return false}this.lastTouchIdentifier=touch.identifier;this.updateScrollParent(targetElement)}}this.trackingClick=true;this.trackingClickStart=event.timeStamp;this.targetElement=targetElement;this.touchStartX=touch.pageX;this.touchStartY=touch.pageY;if(event.timeStamp-this.lastClickTime<this.tapDelay){event.preventDefault()}return true};FastClick.prototype.touchHasMoved=function(event){"use strict";var touch=event.changedTouches[0],boundary=this.touchBoundary;if(Math.abs(touch.pageX-this.touchStartX)>boundary||Math.abs(touch.pageY-this.touchStartY)>boundary){return true}return false};FastClick.prototype.onTouchMove=function(event){"use strict";if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(event.target)||this.touchHasMoved(event)){this.trackingClick=false;this.targetElement=null}return true};FastClick.prototype.findControl=function(labelElement){"use strict";if(labelElement.control!==undefined){return labelElement.control}if(labelElement.htmlFor){return document.getElementById(labelElement.htmlFor)}return labelElement.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};FastClick.prototype.onTouchEnd=function(event){"use strict";var forElement,trackingClickStart,targetTagName,scrollParent,touch,targetElement=this.targetElement;if(!this.trackingClick){return true}if(event.timeStamp-this.lastClickTime<this.tapDelay){this.cancelNextClick=true;return true}this.cancelNextClick=false;this.lastClickTime=event.timeStamp;trackingClickStart=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(deviceIsIOSWithBadTarget){touch=event.changedTouches[0];targetElement=document.elementFromPoint(touch.pageX-window.pageXOffset,touch.pageY-window.pageYOffset)||targetElement;targetElement.fastClickScrollParent=this.targetElement.fastClickScrollParent}targetTagName=targetElement.tagName.toLowerCase();if(targetTagName==="label"){forElement=this.findControl(targetElement);if(forElement){this.focus(targetElement);if(deviceIsAndroid){return false}targetElement=forElement}}else if(this.needsFocus(targetElement)){if(event.timeStamp-trackingClickStart>100||deviceIsIOS&&window.top!==window&&targetTagName==="input"){this.targetElement=null;return false}this.focus(targetElement);this.sendClick(targetElement,event);if(!deviceIsIOS||targetTagName!=="select"){this.targetElement=null;event.preventDefault()}return false}if(deviceIsIOS&&!deviceIsIOS4){scrollParent=targetElement.fastClickScrollParent;if(scrollParent&&scrollParent.fastClickLastScrollTop!==scrollParent.scrollTop){return true}}if(!this.needsClick(targetElement)){event.preventDefault();this.sendClick(targetElement,event)}return false};FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=false;this.targetElement=null};FastClick.prototype.onMouse=function(event){"use strict";if(!this.targetElement){return true}if(event.forwardedTouchEvent){return true}if(!event.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(event.stopImmediatePropagation){event.stopImmediatePropagation()}else{event.propagationStopped=true}event.stopPropagation();event.preventDefault();return false}return true};FastClick.prototype.onClick=function(event){"use strict";var permitted;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(event.target.type==="submit"&&event.detail===0){return true}permitted=this.onMouse(event);if(!permitted){this.targetElement=null}return permitted};FastClick.prototype.destroy=function(){"use strict";var layer=this.layer;if(deviceIsAndroid){layer.removeEventListener("mouseover",this.onMouse,true);layer.removeEventListener("mousedown",this.onMouse,true);layer.removeEventListener("mouseup",this.onMouse,true)}layer.removeEventListener("click",this.onClick,true);layer.removeEventListener("touchstart",this.onTouchStart,false);layer.removeEventListener("touchmove",this.onTouchMove,false);layer.removeEventListener("touchend",this.onTouchEnd,false);layer.removeEventListener("touchcancel",this.onTouchCancel,false)};FastClick.notNeeded=function(layer){"use strict";var metaViewport;var chromeVersion;var blackberryVersion;if(typeof window.ontouchstart==="undefined"){return true}chromeVersion=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(chromeVersion){if(deviceIsAndroid){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(chromeVersion>31&&document.documentElement.scrollWidth<=window.outerWidth){return true}}}else{return true}}if(deviceIsBlackBerry10){blackberryVersion=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/);if(blackberryVersion[1]>=10&&blackberryVersion[2]>=3){metaViewport=document.querySelector("meta[name=viewport]");if(metaViewport){if(metaViewport.content.indexOf("user-scalable=no")!==-1){return true}if(document.documentElement.scrollWidth<=window.outerWidth){return true}}}}if(layer.style.msTouchAction==="none"){return true}return false};FastClick.attach=function(layer,options){"use strict";return new FastClick(layer,options)};if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){define(function(){"use strict";return FastClick})}else if(typeof module!=="undefined"&&module.exports){module.exports=FastClick.attach;module.exports.FastClick=FastClick}else{window.FastClick=FastClick}
if(typeof window.console==="undefined"){window.console={log:function(){}}}var spweb=spweb||{};
spweb.utils=function(Modernizr){"use strict";var exports={objectLength:function(obj){var size=0,key;for(key in obj){if(obj.hasOwnProperty(key)){size++}}return size},getQueryParameter:function(name,qs){qs=qs||window.location.search;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(qs);return results==null?"":decodeURIComponent(results[1].replace(/\+/g," "))},redirect:function(url){window.location.href=url},getRandomInt:function(min,max){return Math.floor(Math.random()*(max-min+1))+min},asyncLoadJs:function(src,callback){var cb=typeof callback==="function"?callback:false,document=document||window.document,script=document.createElement("script"),s=document.getElementsByTagName("script")[0];script.async="async";script.src=src;script.onload=script.onreadystatechange=function(){if(script.readyState){if(script.readyState==="loaded"||script.readyState==="complete"){script.onreadystatechange=null;if(cb){cb()}}}else{if(cb){cb()}}};s.parentNode.insertBefore(script,s)},inherit:function(cls,superclass){function F(){}F.prototype=superclass.prototype;cls.prototype=new F;cls.prototype.constructor=cls},shuffle:function(array){var i,j,tmp;for(i=array.length-1;i>0;i--){j=Math.floor(Math.random()*(i+1));tmp=array[i];array[i]=array[j];array[j]=tmp}return array},updateLazyLoadImages:function(){var isMobileView=false===Modernizr.mq("(min-width: 768px)");$("div.lazy").each(function(index){var newOriginal,$this=$(this);if($this.hasClass("lazy-no-small")){return}if(isMobileView&&$this.attr("data-original").indexOf("-sm")<0){newOriginal=$this.attr("data-original").replace(".jpg","-sm.jpg").replace(".png","-sm.png");$this.attr("data-original",newOriginal)}if(!isMobileView&&$this.attr("data-original").indexOf("-sm")>0){newOriginal=$this.attr("data-original").replace("-sm.jpg",".jpg").replace("-sm.png",".png");$this.attr("data-original",newOriginal)}if($this.css("background-image")!=="none"&&newOriginal!==undefined){$this.css("background-image","url("+newOriginal+")")}})}};return exports}(Modernizr);
spweb.cookie=function(){"use strict";var exports={};exports.set=function(params){var name=params.name,value,expires,domain;if(typeof params.value==="undefined"){value="";expires="-1"}else{value=params.value}if(typeof params.expires!=="undefined"){var date=new Date;date.setTime(date.getTime()+params.expires*24*60*60*1e3);expires="; expires="+date.toGMTString()}else{expires=""}if(typeof params.domain!=="undefined"&&params.domain!==null){domain="; domain="+params.domain}else{domain=""}window.document.cookie=name+"="+value+expires+domain+"; path=/"};exports.get=function(name){var nameEQ=name+"=",ca=window.document.cookie.split(";"),i;for(i=0;i<ca.length;i+=1){var c=ca[i];while(c.charAt(0)===" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)===0){return c.substring(nameEQ.length,c.length)}}return null};exports.remove=function(name){this.set({name:name})};return exports}();
spweb.securityMonitor=function($,user,device){"use strict";var exports={};var _doLog=function(logType,args){var security;try{security.XY.Z}catch(e){var logData={args:args,browser:device.getBrowser(),url:window.location.href,referrer:document.referrer,trace:e.stack||"N/A"};$.ajax({type:"POST",url:"/"+user.getMarket()+"/xhr/json/tracking.php",data:{event:"SecurityWarning",params:JSON.stringify({type:logType+":web-site",log_data:logData})}});$.ajax({type:"POST",url:"/"+user.getMarket()+"/xhr/json/security-monitor.php",data:{site:window.location.origin,method:logType,data:JSON.stringify(logData)}})}};exports.init=function(){(function(fn){window.alert=function(){var args=Array.prototype.slice.call(arguments);_doLog("alert",args);return fn.apply(window,args)}})(window.alert);(function(fn){window.prompt=function(){var args=Array.prototype.slice.call(arguments);_doLog("prompt",args);return fn.apply(window,args)}})(window.prompt);(function(fn){window.confirm=function(){var args=Array.prototype.slice.call(arguments);_doLog("confirm",args);return fn.apply(window,args)}})(window.confirm)};return exports}(jQuery,spweb.user,spweb.device);
spweb.device=function(MobileDetect,Modernizr){"use strict";var _mobileDetect=null,_browser=null,_browserVersion=null,_isAndroid=null,_isiOS=null,_isMobile=null,_isTablet=null,_isDesktop=null,_os=null,_supportsAudio=null,_supportsVideo=null,_BROWSER_CHROME="Chrome",_BROWSER_FIREFOX="Firefox",_BROWSER_SAFARI="Safari",_BROWSER_IE="IE",_BROWSER_OPERA="Opera",_BROWSER_UNKNOWN="Unknown",_BROWSER_VERSION_UNKNOWN="unknown",exports={};exports.OS_WINDOWSPHONE="windowsphone";exports.OS_ANDROID="android";exports.OS_IOS="ios";exports.OS_MAC="mac";exports.OS_WINDOWS="windows";exports.OS_LINUX="linux";exports.OS_CHROMEBOOK="chromebook";exports.OS_UNKNOWN="unknown";exports.getMobileDetect=function(){if(_mobileDetect===null){_mobileDetect=new MobileDetect(window.navigator.userAgent)}return _mobileDetect};exports.getBrowser=function(){var checkVersion=function(md,browser){var version=md.version(browser);return version!==null&&!isNaN(version)?browser:false};var md=this.getMobileDetect();if(_browser===null){if(this.getMobileDetect().userAgent()!==null){_browser=this.getMobileDetect().userAgent()}else{_browser=checkVersion(md,_BROWSER_CHROME)||checkVersion(md,_BROWSER_FIREFOX)||checkVersion(md,_BROWSER_SAFARI)||checkVersion(md,_BROWSER_IE)||checkVersion(md,_BROWSER_OPERA)||checkVersion(md,_BROWSER_UNKNOWN);if(_browser===false){_browser=_BROWSER_UNKNOWN}}}return _browser};exports.getBrowserVersion=function(){if(_browserVersion===null){_browserVersion=this.getMobileDetect().version(this.getBrowser());if(isNaN(_browserVersion)){_browserVersion=_BROWSER_VERSION_UNKNOWN}}return _browserVersion};exports.getOs=function(){if(_os===null){if(/Windows Phone 8/i.test(window.navigator.userAgent)){_os=exports.OS_WINDOWSPHONE}else{var detectedOs=this.getMobileDetect().os();if(detectedOs==="WindowsPhoneOs"||detectedOs==="WindowsMobileOS"){_os=exports.OS_WINDOWSPHONE}else if(detectedOs==="iOS"){_os=exports.OS_IOS}else if(detectedOs==="AndroidOS"){_os=exports.OS_ANDROID}else if(window.navigator.platform.indexOf("Win")>-1){_os=exports.OS_WINDOWS}else if(window.navigator.platform.indexOf("Mac")>-1){_os=exports.OS_MAC}else if(window.navigator.userAgent.indexOf("CrOS")>-1){_os=exports.OS_CHROMEBOOK}else if(window.navigator.platform.indexOf("Linux")>-1){_os=exports.OS_LINUX}else{_os=exports.OS_UNKNOWN}}}return _os};exports.isAndroid=function(){if(_isAndroid===null){_isAndroid=this.getOs()===exports.OS_ANDROID?true:false}return _isAndroid};exports.isDesktop=function(){if(_isDesktop===null){_isDesktop=spweb.device.getOs()===spweb.device.OS_WINDOWS||spweb.device.getOs()===spweb.device.OS_MAC||spweb.device.getOs()===spweb.device.OS_LINUX?true:false}return _isDesktop};exports.isiOS=function(){if(_isiOS===null){_isiOS=this.getOs()===exports.OS_IOS?true:false}return _isiOS};exports.isMobile=function(){if(_isMobile===null){_isMobile=this.getMobileDetect().mobile()!==null?true:false}return _isMobile};exports.isTablet=function(){if(_isTablet===null){_isTablet=this.getMobileDetect().tablet()!==null?true:false}return _isTablet};exports.supportsAudio=function(){var self=exports;if(_supportsAudio===null){_supportsAudio=Modernizr.audio&&(Modernizr.audio.mp3!==""||Modernizr.audio.ogg!=="")&&!self.isMobile()?true:false}return _supportsAudio};exports.supportsVideo=function(){var self=exports;if(_supportsVideo===null){_supportsVideo=Modernizr.video&&(Modernizr.video.h264!==""||Modernizr.video.webm!=="")&&!self.isMobile()?true:false}return _supportsVideo};return exports}(MobileDetect,Modernizr);
spweb.user=function($){"use strict";var _lang=null,_market=null,exports={};exports.getLang=function(){if(_lang===null){_lang=$("body").attr("class").match(/l-([\w]+)/)[1]}return _lang};exports.getMarket=function(){if(_market===null){_market=$("body").attr("class").match(/m-([\w-]+)/)[1]}return _market};exports.isLoggedIn=function(){return $("body").hasClass("is-loggedin")};return exports}(jQuery);
spweb.analytics=function(globals,$,cookie){"use strict";var exports={},_trackingId=null,_enableGaEvents;_enableGaEvents=function(){$("[data-ga-category]").bind("click",function(){var that=$(this);var category=that.data("ga-category")||"";var action=that.data("ga-action")||"";var label=that.data("ga-label")||"";if(category&&action){exports.sendEvent(category,action,label)}});$.subscribe("login_username_success",function(){globals.dataLayer.push({event:"login_username_success"})});$.subscribe("login_facebook_success",function(){globals.dataLayer.push({event:"login_facebook_success"})});if(cookie.get("sp_fblt")){$.publish("login_facebook_success");cookie.remove("sp_fblt")}};exports.init=function(){_enableGaEvents()};exports.trackEvent=function(category,action,label){this.sendEvent(category,action,label)};exports.sendEvent=function(category,action,label,context){if(arguments.length<2){return}if(typeof category!=="string"||typeof action!=="string"){return}globals.ga("set","anonymizeIp",true);globals.ga("send","event",category,action,label);globals.spAnalytics.logEvent(category,action,label,context)};return exports}(this,jQuery,spweb.cookie);
spweb.tracking=function(globals,$,device){"use strict";var exports={};exports.pushGTMEvent=function(eventName){globals.dataLayer.push({event:eventName})};$.subscribe("registration_success",function(){exports.pushGTMEvent("registration_success")});exports.init=function(){this._setGTMDeviceData();this._bindEventHandlers()};exports._setGTMDeviceData=function(){globals.dataLayer.push({device:device.isMobile()?"mobile":"desktop"})};exports._bindEventHandlers=function(){var self=this;$(".js-gtm-event").on("click",function(){var jqEl=$(this);self._handleGTMClick(jqEl)})};exports._handleGTMClick=function(el){var name=el.data("gtm-event-name");if(name!==undefined){exports.pushGTMEvent(name)}};return exports}(this,jQuery,spweb.device);
spweb.download=function($,cookie){"use strict";var exports={};exports.download=function(url){$(document).ready(function(){setTimeout(function(){window.location.href=url},100)});cookie.remove("pxt")};return exports}(jQuery,spweb.cookie);
spweb.messageBars=function($,cookie){"use strict";var exports={active:{},init:function(){spweb.messageBars.holder=$("#js-message-bars");for(var messageBar in spweb.messageBars){spweb.messageBars.initMessageBar(messageBar)}},initMessageBar:function(messageBar){if(spweb.messageBars[messageBar]&&spweb.messageBars[messageBar].name&&spweb.messageBars[messageBar].selector){spweb.messageBars[messageBar].element=$(spweb.messageBars[messageBar].selector);if(spweb.messageBars[messageBar].element.length===0){return}if(cookie.get(spweb.messageBars[messageBar].name)){return}spweb.messageBars[messageBar]._show=function(){spweb.messageBars[messageBar].element.removeClass("hidden")};spweb.messageBars[messageBar]._hide=function(){spweb.messageBars[messageBar].element.addClass("hidden")};spweb.messageBars.add(spweb.messageBars[messageBar]);spweb.messageBars[messageBar].element.alert();spweb.messageBars[messageBar].element.on("closed.bs.alert",function(){var cookieData={name:spweb.messageBars[messageBar].name,value:"1"};if(spweb.messageBars[messageBar].multiDomainCookie){cookieData.domain="."+window.location.host.split(".").splice(1).join(".")}if(spweb.messageBars[messageBar].cookieExpirationDays){cookieData.expires=spweb.messageBars[messageBar].cookieExpirationDays}cookie.set(cookieData);spweb.messageBars.remove(spweb.messageBars[messageBar])});if(typeof spweb.messageBars[messageBar].init==="function"){spweb.messageBars[messageBar].init()}}},add:function(message){spweb.messageBars.active[message.name]=message;message._show();$.publish("message_bars_shown")},remove:function(message){delete spweb.messageBars.active[message.name];message._hide();if(spweb.messageBars.hasItem()){$.publish("message_bars_shown")}else{$.publish("message_bars_hidden")}},hasItem:function(){var key;for(key in spweb.messageBars.active){if(spweb.messageBars.active.hasOwnProperty(key)){return true}}return false},multiLanguage:{name:"multiLanguage",selector:"#js-message-bar-multi-language",init:function(){$(".multi-language-link").unbind("click.messageBars").bind("click.messageBars",function(){$.get("/"+spweb.messageBars.multiLanguage.element.data("alternative-market")+"/update-preferred-locale/")})}},cookieNotice:{name:"cookieNotice",selector:"#js-message-bar-cookie-notice",multiDomainCookie:true,cookieExpirationDays:90},specialNotice:{name:"specialNotice",selector:"#js-message-bar-special-notice"}};return exports}(jQuery,spweb.cookie);
spweb.modal=function($,device,utils){"use strict";var exports={};exports.init=function(){$(document).on("click.modal",'[data-open="modal"]',function(e){var youtubeId=$(this).data("youtube-id"),modalYouttube;e.preventDefault();modalYouttube=$('<div class="modal">'+'<div class="modal-dialog modal-lg">'+'<div class="modal-content">'+'<div class="embed-responsive embed-responsive-16by9">'+'<iframe class="embed-responsive-item" src="//www.youtube.com/embed/'+youtubeId+'?modestbranding=1&rel=0&autoplay=1&controls=1" frameborder="0" allowfullscreen></iframe>'+"</div>"+"</div>"+"</div>"+"</div>");$("body").append(modalYouttube);$.publish("foreground_video_play");modalYouttube.click(function(){$.publish("foreground_video_stop");modalYouttube.remove()});modalYouttube.on("hidden.bs.modal",function(){$.publish("foreground_video_stop")})});if(utils.getQueryParameter("autoplay")==="1"){var firstModal=$('[data-open="modal"]').first();if(firstModal.length>0){firstModal.click()}}};return exports}(jQuery,spweb.device,spweb.utils);
spweb.navbar=function($){"use strict";var exports={},fixedClass="navbar-fixed-top",staticClass="navbar-static-top",dataTag="navbar-fixed-top-disabled";exports._shown=function(){var navbar=$("#js-navbar");if(navbar.length===0){return}if(navbar.hasClass(fixedClass)){navbar.removeClass(fixedClass).addClass(staticClass).data(dataTag,true)}};exports._hidden=function(){var navbar=$("#js-navbar");if(navbar.length===0){return}if(navbar.data(dataTag)===true){navbar.addClass(fixedClass).removeClass(staticClass).data(dataTag,false)}};exports.init=function(){$.subscribe("message_bars_shown",function(){exports._shown()});$.subscribe("message_bars_hidden",function(){exports._hidden()})};return exports}(jQuery);
(function($){$.extend($.fn,{validate:function(options){if(!this.length){if(options&&options.debug&&window.console){console.warn("Nothing selected, can't validate, returning nothing.")}return}var validator=$.data(this[0],"validator");if(validator){return validator}this.attr("novalidate","novalidate");validator=new $.validator(options,this[0]);$.data(this[0],"validator",validator);if(validator.settings.onsubmit){this.validateDelegate(":submit","click",function(event){if(validator.settings.submitHandler){validator.submitButton=event.target}if($(event.target).hasClass("cancel")){validator.cancelSubmit=true}if($(event.target).attr("formnovalidate")!==undefined){validator.cancelSubmit=true}});this.submit(function(event){if(validator.settings.debug){event.preventDefault()}function handle(){var hidden;if(validator.settings.submitHandler){if(validator.submitButton){hidden=$("<input type='hidden'/>").attr("name",validator.submitButton.name).val($(validator.submitButton).val()).appendTo(validator.currentForm)}validator.settings.submitHandler.call(validator,validator.currentForm,event);if(validator.submitButton){hidden.remove()}return false}return true}if(validator.cancelSubmit){validator.cancelSubmit=false;return handle()}if(validator.form()){if(validator.pendingRequest){validator.formSubmitted=true;return false}return handle()}else{validator.focusInvalid();return false}})}return validator},valid:function(){if($(this[0]).is("form")){return this.validate().form()}else{var valid=true;var validator=$(this[0].form).validate();this.each(function(){valid=valid&&validator.element(this)});return valid}},removeAttrs:function(attributes){var result={},$element=this;$.each(attributes.split(/\s/),function(index,value){result[value]=$element.attr(value);$element.removeAttr(value)});return result},rules:function(command,argument){var element=this[0];if(command){var settings=$.data(element.form,"validator").settings;var staticRules=settings.rules;var existingRules=$.validator.staticRules(element);switch(command){case"add":$.extend(existingRules,$.validator.normalizeRule(argument));delete existingRules.messages;staticRules[element.name]=existingRules;if(argument.messages){settings.messages[element.name]=$.extend(settings.messages[element.name],argument.messages)}break;case"remove":if(!argument){delete staticRules[element.name];return existingRules}var filtered={};$.each(argument.split(/\s/),function(index,method){filtered[method]=existingRules[method];delete existingRules[method]});return filtered}}var data=$.validator.normalizeRules($.extend({},$.validator.classRules(element),$.validator.attributeRules(element),$.validator.dataRules(element),$.validator.staticRules(element)),element);if(data.required){var param=data.required;delete data.required;data=$.extend({required:param},data)}return data}});$.extend($.expr[":"],{blank:function(a){return!$.trim(""+$(a).val())},filled:function(a){return!!$.trim(""+$(a).val())},unchecked:function(a){return!$(a).prop("checked")}});$.validator=function(options,form){this.settings=$.extend(true,{},$.validator.defaults,options);this.currentForm=form;this.init()};$.validator.format=function(source,params){if(arguments.length===1){return function(){var args=$.makeArray(arguments);args.unshift(source);return $.validator.format.apply(this,args)}}if(arguments.length>2&&params.constructor!==Array){params=$.makeArray(arguments).slice(1)}if(params.constructor!==Array){params=[params]}$.each(params,function(i,n){source=source.replace(new RegExp("\\{"+i+"\\}","g"),function(){return n})});return source};$.extend($.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:$([]),errorLabelContainer:$([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(element,event){this.lastActive=element;if(this.settings.focusCleanup&&!this.blockFocusCleanup){if(this.settings.unhighlight){this.settings.unhighlight.call(this,element,this.settings.errorClass,this.settings.validClass)}this.addWrapper(this.errorsFor(element)).hide()}},onfocusout:function(element,event){if(!this.checkable(element)&&(element.name in this.submitted||!this.optional(element))){this.element(element)}},onkeyup:function(element,event){if(event.which===9&&this.elementValue(element)===""){return}else if(element.name in this.submitted||element===this.lastElement){this.element(element)}},onclick:function(element,event){if(element.name in this.submitted){this.element(element)}else if(element.parentNode.name in this.submitted){this.element(element.parentNode)}},highlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).addClass(errorClass).removeClass(validClass)}else{$(element).addClass(errorClass).removeClass(validClass)}},unhighlight:function(element,errorClass,validClass){if(element.type==="radio"){this.findByName(element.name).removeClass(errorClass).addClass(validClass)}else{$(element).removeClass(errorClass).addClass(validClass)}}},setDefaults:function(settings){$.extend($.validator.defaults,settings)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:$.validator.format("Please enter no more than {0} characters."),minlength:$.validator.format("Please enter at least {0} characters."),rangelength:$.validator.format("Please enter a value between {0} and {1} characters long."),range:$.validator.format("Please enter a value between {0} and {1}."),max:$.validator.format("Please enter a value less than or equal to {0}."),min:$.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=$(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||$(this.currentForm);this.containers=$(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var groups=this.groups={};$.each(this.settings.groups,function(key,value){if(typeof value==="string"){value=value.split(/\s/)}$.each(value,function(index,name){groups[name]=key})});var rules=this.settings.rules;$.each(rules,function(key,value){rules[key]=$.validator.normalizeRule(value)});function delegate(event){var validator=$.data(this[0].form,"validator"),eventType="on"+event.type.replace(/^validate/,"");if(validator.settings[eventType]){validator.settings[eventType].call(validator,this[0],event)}}$(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, "+"[type='number'], [type='search'] ,[type='tel'], [type='url'], "+"[type='email'], [type='datetime'], [type='date'], [type='month'], "+"[type='week'], [type='time'], [type='datetime-local'], "+"[type='range'], [type='color'] ","focusin focusout keyup",delegate).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",delegate);if(this.settings.invalidHandler){$(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();$.extend(this.submitted,this.errorMap);this.invalid=$.extend({},this.errorMap);if(!this.valid()){$(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var i=0,elements=this.currentElements=this.elements();elements[i];i++){this.check(elements[i])}return this.valid()},element:function(element){element=this.validationTargetFor(this.clean(element));this.lastElement=element;this.prepareElement(element);this.currentElements=$(element);var result=this.check(element)!==false;if(result){delete this.invalid[element.name]}else{this.invalid[element.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return result},showErrors:function(errors){if(errors){$.extend(this.errorMap,errors);this.errorList=[];for(var name in errors){this.errorList.push({message:errors[name],element:this.findByName(name)[0]})}this.successList=$.grep(this.successList,function(element){return!(element.name in errors)})}if(this.settings.showErrors){this.settings.showErrors.call(this,this.errorMap,this.errorList)}else{this.defaultShowErrors()}},resetForm:function(){if($.fn.resetForm){$(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass).removeData("previousValue")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(obj){var count=0;for(var i in obj){count++}return count},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{$(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}}},findLastActive:function(){var lastActive=this.lastActive;return lastActive&&$.grep(this.errorList,function(n){return n.element.name===lastActive.name}).length===1&&lastActive},elements:function(){var validator=this,rulesCache={};return $(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){if(!this.name&&validator.settings.debug&&window.console){console.error("%o has no name assigned",this)}if(this.name in rulesCache||!validator.objectLength($(this).rules())){return false}rulesCache[this.name]=true;return true})},clean:function(selector){return $(selector)[0]},errors:function(){var errorClass=this.settings.errorClass.replace(" ",".");return $(this.settings.errorElement+"."+errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=$([]);this.toHide=$([]);this.currentElements=$([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(element){this.reset();this.toHide=this.errorsFor(element)},elementValue:function(element){var type=$(element).attr("type"),val=$(element).val();if(type==="radio"||type==="checkbox"){return $("input[name='"+$(element).attr("name")+"']:checked").val()}if(typeof val==="string"){return val.replace(/\r/g,"")}return val},check:function(element){element=this.validationTargetFor(this.clean(element));var rules=$(element).rules();var dependencyMismatch=false;var val=this.elementValue(element);var result;for(var method in rules){var rule={method:method,parameters:rules[method]};try{result=$.validator.methods[method].call(this,val,element,rule.parameters);if(result==="dependency-mismatch"){dependencyMismatch=true;continue}dependencyMismatch=false;if(result==="pending"){this.toHide=this.toHide.not(this.errorsFor(element));return}if(!result){this.formatAndAdd(element,rule);return false}}catch(e){if(this.settings.debug&&window.console){console.log("Exception occurred when checking element "+element.id+", check the '"+rule.method+"' method.",e)}throw e}}if(dependencyMismatch){return}if(this.objectLength(rules)){this.successList.push(element)}return true},customDataMessage:function(element,method){return $(element).data("msg-"+method.toLowerCase())||element.attributes&&$(element).attr("data-msg-"+method.toLowerCase())},customMessage:function(name,method){var m=this.settings.messages[name];return m&&(m.constructor===String?m:m[method])},findDefined:function(){for(var i=0;i<arguments.length;i++){if(arguments[i]!==undefined){return arguments[i]}}return undefined},defaultMessage:function(element,method){return this.findDefined(this.customMessage(element.name,method),this.customDataMessage(element,method),!this.settings.ignoreTitle&&element.title||undefined,$.validator.messages[method],"<strong>Warning: No message defined for "+element.name+"</strong>")},formatAndAdd:function(element,rule){var message=this.defaultMessage(element,rule.method),theregex=/\$?\{(\d+)\}/g;if(typeof message==="function"){message=message.call(this,rule.parameters,element)}else if(theregex.test(message)){message=$.validator.format(message.replace(theregex,"{$1}"),rule.parameters)}this.errorList.push({message:message,element:element});this.errorMap[element.name]=message;this.submitted[element.name]=message},addWrapper:function(toToggle){if(this.settings.wrapper){toToggle=toToggle.add(toToggle.parent(this.settings.wrapper))}return toToggle},defaultShowErrors:function(){var i,elements;for(i=0;this.errorList[i];i++){var error=this.errorList[i];if(this.settings.highlight){this.settings.highlight.call(this,error.element,this.settings.errorClass,this.settings.validClass)}this.showLabel(error.element,error.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(i=0;this.successList[i];i++){this.showLabel(this.successList[i])}}if(this.settings.unhighlight){for(i=0,elements=this.validElements();elements[i];i++){this.settings.unhighlight.call(this,elements[i],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return $(this.errorList).map(function(){return this.element})},showLabel:function(element,message){var label=this.errorsFor(element);if(label.length){label.removeClass(this.settings.validClass).addClass(this.settings.errorClass);label.html(message)}else{label=$("<"+this.settings.errorElement+">").attr("for",this.idOrName(element)).addClass(this.settings.errorClass).html(message||"");if(this.settings.wrapper){label=label.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(label).length){if(this.settings.errorPlacement){this.settings.errorPlacement(label,$(element))}else{label.insertAfter(element)}}}if(!message&&this.settings.success){label.text("");if(typeof this.settings.success==="string"){label.addClass(this.settings.success)}else{this.settings.success(label,element)}}this.toShow=this.toShow.add(label)},errorsFor:function(element){var name=this.idOrName(element);return this.errors().filter(function(){return $(this).attr("for")===name})},idOrName:function(element){return this.groups[element.name]||(this.checkable(element)?element.name:element.id||element.name)},validationTargetFor:function(element){if(this.checkable(element)){element=this.findByName(element.name).not(this.settings.ignore)[0]}return element},checkable:function(element){return/radio|checkbox/i.test(element.type)},findByName:function(name){return $(this.currentForm).find("[name='"+name+"']")},getLength:function(value,element){switch(element.nodeName.toLowerCase()){case"select":return $("option:selected",element).length;case"input":if(this.checkable(element)){return this.findByName(element.name).filter(":checked").length}}return value.length},depend:function(param,element){return this.dependTypes[typeof param]?this.dependTypes[typeof param](param,element):true},dependTypes:{"boolean":function(param,element){return param},string:function(param,element){return!!$(param,element.form).length},"function":function(param,element){return param(element)}},optional:function(element){var val=this.elementValue(element);return!$.validator.methods.required.call(this,val,element)&&"dependency-mismatch"},startRequest:function(element){if(!this.pending[element.name]){this.pendingRequest++;this.pending[element.name]=true}},stopRequest:function(element,valid){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[element.name];if(valid&&this.pendingRequest===0&&this.formSubmitted&&this.form()){$(this.currentForm).submit();this.formSubmitted=false}else if(!valid&&this.pendingRequest===0&&this.formSubmitted){$(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}},previousValue:function(element){return $.data(element,"previousValue")||$.data(element,"previousValue",{old:null,valid:true,message:this.defaultMessage(element,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},number:{number:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(className,rules){if(className.constructor===String){this.classRuleSettings[className]=rules}else{$.extend(this.classRuleSettings,className)}},classRules:function(element){var rules={};var classes=$(element).attr("class");if(classes){$.each(classes.split(" "),function(){if(this in $.validator.classRuleSettings){$.extend(rules,$.validator.classRuleSettings[this])}})}return rules},attributeRules:function(element){var rules={};var $element=$(element);var type=$element[0].getAttribute("type");for(var method in $.validator.methods){var value;if(method==="required"){value=$element.get(0).getAttribute(method);if(value===""){value=true}value=!!value}else{value=$element.attr(method)}if(/min|max/.test(method)&&(type===null||/number|range|text/.test(type))){value=Number(value)}if(value){rules[method]=value}else if(type===method&&type!=="range"){rules[method]=true}}if(rules.maxlength&&/-1|2147483647|524288/.test(rules.maxlength)){delete rules.maxlength}return rules},dataRules:function(element){var method,value,rules={},$element=$(element);for(method in $.validator.methods){value=$element.data("rule-"+method.toLowerCase());if(value!==undefined){rules[method]=value}}return rules},staticRules:function(element){var rules={};var validator=$.data(element.form,"validator");if(validator.settings.rules){rules=$.validator.normalizeRule(validator.settings.rules[element.name])||{}}return rules},normalizeRules:function(rules,element){$.each(rules,function(prop,val){if(val===false){delete rules[prop];return}if(val.param||val.depends){var keepRule=true;switch(typeof val.depends){case"string":keepRule=!!$(val.depends,element.form).length;break;case"function":keepRule=val.depends.call(element,element);break}if(keepRule){rules[prop]=val.param!==undefined?val.param:true}else{delete rules[prop]}}});$.each(rules,function(rule,parameter){rules[rule]=$.isFunction(parameter)?parameter(element):parameter});$.each(["minlength","maxlength"],function(){if(rules[this]){rules[this]=Number(rules[this])}});$.each(["rangelength","range"],function(){var parts;if(rules[this]){if($.isArray(rules[this])){rules[this]=[Number(rules[this][0]),Number(rules[this][1])]}else if(typeof rules[this]==="string"){parts=rules[this].split(/[\s,]+/);rules[this]=[Number(parts[0]),Number(parts[1])]}}});if($.validator.autoCreateRanges){if(rules.min&&rules.max){rules.range=[rules.min,rules.max];delete rules.min;delete rules.max}if(rules.minlength&&rules.maxlength){rules.rangelength=[rules.minlength,rules.maxlength];delete rules.minlength;delete rules.maxlength}}return rules},normalizeRule:function(data){if(typeof data==="string"){var transformed={};$.each(data.split(/\s/),function(){transformed[this]=true});data=transformed}return data},addMethod:function(name,method,message){$.validator.methods[name]=method;$.validator.messages[name]=message!==undefined?message:$.validator.messages[name];if(method.length<3){$.validator.addClassRules(name,$.validator.normalizeRule(name))}},methods:{required:function(value,element,param){if(!this.depend(param,element)){return"dependency-mismatch"}if(element.nodeName.toLowerCase()==="select"){var val=$(element).val();return val&&val.length>0}if(this.checkable(element)){return this.getLength(value,element)>0}return $.trim(value).length>0},email:function(value,element){return this.optional(element)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(value)},url:function(value,element){return this.optional(element)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(value)},date:function(value,element){return this.optional(element)||!/Invalid|NaN/.test(new Date(value).toString())},dateISO:function(value,element){return this.optional(element)||/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/.test(value)},number:function(value,element){return this.optional(element)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(value)},digits:function(value,element){return this.optional(element)||/^\d+$/.test(value)},creditcard:function(value,element){if(this.optional(element)){return"dependency-mismatch"}if(/[^0-9 \-]+/.test(value)){return false}var nCheck=0,nDigit=0,bEven=false;value=value.replace(/\D/g,"");for(var n=value.length-1;n>=0;n--){var cDigit=value.charAt(n);nDigit=parseInt(cDigit,10);if(bEven){if((nDigit*=2)>9){nDigit-=9}}nCheck+=nDigit;bEven=!bEven}return nCheck%10===0},minlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param},maxlength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length<=param},rangelength:function(value,element,param){var length=$.isArray(value)?value.length:this.getLength($.trim(value),element);return this.optional(element)||length>=param[0]&&length<=param[1]},min:function(value,element,param){return this.optional(element)||value>=param},max:function(value,element,param){return this.optional(element)||value<=param},range:function(value,element,param){return this.optional(element)||value>=param[0]&&value<=param[1]},equalTo:function(value,element,param){var target=$(param);if(this.settings.onfocusout){target.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){$(element).valid()})}return value===target.val()},remote:function(value,element,param){if(this.optional(element)){return"dependency-mismatch"}var previous=this.previousValue(element);if(!this.settings.messages[element.name]){this.settings.messages[element.name]={}}previous.originalMessage=this.settings.messages[element.name].remote;this.settings.messages[element.name].remote=previous.message;param=typeof param==="string"&&{url:param}||param;if(previous.old===value){return previous.valid}previous.old=value;var validator=this;this.startRequest(element);var data={};data[element.name]=value;$.ajax($.extend(true,{url:param,mode:"abort",port:"validate"+element.name,dataType:"json",data:data,success:function(response){validator.settings.messages[element.name].remote=previous.originalMessage;var valid=response===true||response==="true";if(valid){var submitted=validator.formSubmitted;validator.prepareElement(element);validator.formSubmitted=submitted;validator.successList.push(element);delete validator.invalid[element.name];validator.showErrors()}else{var errors={};var message=response||validator.defaultMessage(element,"remote");errors[element.name]=previous.message=$.isFunction(message)?message(value):message;validator.invalid[element.name]=true;validator.showErrors(errors)}previous.valid=valid;validator.stopRequest(element,valid)}},param));return"pending"}}});$.format=$.validator.format})(jQuery);(function($){var pendingRequests={};if($.ajaxPrefilter){$.ajaxPrefilter(function(settings,_,xhr){var port=settings.port;if(settings.mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}pendingRequests[port]=xhr}})}else{var ajax=$.ajax;$.ajax=function(settings){var mode=("mode"in settings?settings:$.ajaxSettings).mode,port=("port"in settings?settings:$.ajaxSettings).port;if(mode==="abort"){if(pendingRequests[port]){pendingRequests[port].abort()}pendingRequests[port]=ajax.apply(this,arguments);return pendingRequests[port]}return ajax.apply(this,arguments)}}})(jQuery);(function($){$.extend($.fn,{validateDelegate:function(delegate,type,handler){return this.bind(type,function(event){var target=$(event.target);if(target.is(delegate)){return handler.apply(target,arguments)}})}})})(jQuery);
spweb.Form=function($,utils,config){"use strict";function Form(form){this.form=form;this._isSubmitting=false}Form.prototype.init=function(options){var self=this,validationOptions={submitHandler:function(){var form=self.form;if(!self._isSubmitting){self._isSubmitting=true;self.showAjaxSpinner();$.publish("form_submit."+self.form.attr("id"));jQuery.ajax({data:form.serialize(),dataType:"json",success:function(data){$.publish("form_success."+self.form.attr("id"),data)},error:function(){$.publish("form_error."+self.form.attr("id"))},complete:function(){self.hideAjaxSpinner();self._isSubmitting=false},type:form.attr("method"),url:form.attr("action")})}},errorClass:"has-error",errorPlacement:function(error,element){var formGroup=element.parents(".form-group");if(formGroup.length>0){formGroup.addClass("has-error");error.addClass("control-label-validation")}element.after(error)},success:function(label){var formGroup=label.parents(".form-group");if(formGroup.length>0){formGroup.removeClass("has-error");label.remove()}}};this.validationOptions=jQuery.extend(validationOptions,options);this._setupValidation();this._initPolyfills();if(this.validationOptions.submitHandler!==null){this._insertAjaxSpinner()}};Form.prototype._setupValidation=function(){this.validator=this.form.validate(this.validationOptions)};Form.prototype._initPolyfills=function(){if(!Modernizr.input.placeholder){var polyfill=function(){jQuery("input[placeholder], textarea[placeholder]").placeholder()};if(typeof jQuery.fn.placeholder!=="undefined"){polyfill()}else{utils.asyncLoadJs(config.environment.staticUrl+"/js/jquery.placeholder.min.js",polyfill)}}};Form.prototype.resetForm=function(){this.validator.resetForm()};Form.prototype._insertAjaxSpinner=function(){var spinner=jQuery("<div></div>");spinner.addClass("hidden ajax-spinner");this.form.prepend(spinner);this.ajaxSpinner=spinner};Form.prototype.showAjaxSpinner=function(){this.ajaxSpinner.removeClass("hidden")};Form.prototype.hideAjaxSpinner=function(){this.ajaxSpinner.addClass("hidden")};Form.prototype.showGeneralError=function(message){var e=this.form.find(".js-general-error");if(e.length&&(message||e.data("error"))){e.html(message?message:e.data("error")).removeClass("hidden")}};Form.prototype.hideGeneralError=function(){var e=this.form.find(".js-general-error");if(e.length){e.addClass("hidden")}};return Form}(jQuery,spweb.utils,spweb.config);
spweb.fb=function($,user,config){"use strict";var exports={fbStatus:{DISCONNECTED:"disconnected",CONNECTED:"connected",NOT_AUTHORIZED:"not-authorized",ERROR:"error"},defaults:{appId:config.facebook.appId,cookie:true,status:false,xfbml:true,oauth:true,version:config.facebook.version},api:null,_initFacebookAPI:function(options,callback,errback){this.api=window.FB;var opts=$.extend({},this.defaults,options);this.api.init(opts);this._verifyConnection(callback,errback);$.publish("fb_init")},_verifyConnection:function(callback,errback){var self=this;this.api.getLoginStatus(function(response){self._checkFbLoginResponse(response,callback,errback)},true)},_checkFbLoginResponse:function(response,callback,errback){switch(response.status){case"connected":this.status=this.fbStatus.CONNECTED;if(callback){callback(response)}break;case"not_authorized":this.status=this.fbStatus.NOT_AUTHORIZED;if(errback){errback(response)}break;default:this.status=this.fbStatus.DISCONNECTED;if(errback){errback(response)}}},_loadFacebookScript:function(){if(!window.spyASL){window.spyASL=function(src){setTimeout(function(){var s=document.createElement("script");s.type="text/javascript";s.async=true;s.src=src;document.getElementsByTagName("head")[0].appendChild(s)},1)}}if(!window.FB){window.spyASL("//connect.facebook.net/"+spweb.config.facebook.locale+"/sdk.js")}},connect:function(callback){var errback=callback;var self=this;if(!this.api){window.fbAsyncInit=function(){self._initFacebookAPI(callback,errback)};this._loadFacebookScript()}else{this._verifyConnection(callback,errback)}},login:function(callback,errback,scope){var self=this;if(!self.api){self._initFacebookAPI();return}self.api.login(function(response){self._checkFbLoginResponse(response,callback,errback)},scope)}};return exports}(jQuery,spweb.user,spweb.config);
spweb.register=function($,Form,device,user,fb,config,cookie){"use strict";var _formEmail,_formFacebook,_formCode,_forwardUrl,_onAjaxSubmitSuccess,_signupWithFacebook,_getSubmitSuccessDeferreds,_verifyInviteCode,_pollTokenService,exports={};_onAjaxSubmitSuccess=function(data,source){if(typeof data!=="object"){_formEmail.showGeneralError();return}if(data.error){_formEmail.showGeneralError(data.error);return}if(data.status!==1){if(source==="facebook"){_formFacebook.showGeneralError(data.message)}else{_formEmail.showGeneralError(data.message);if(data.hasOwnProperty("errors")){var errors={};var errorType;for(errorType in data.errors){errors[errorType]=data.errors[errorType].message}_formEmail.validator.showErrors(errors)}}return}if(data.new_account){$.publish("registration_success");window.optimizely=window.optimizely||[];window.optimizely.push(["trackEvent","registration_success"]);if(source==="facebook"){$.publish("login_facebook_success")}else{$("#register-button-email-submit").attr("disabled","disabled");$.publish("login_username_success")}}var forwardUrl=spweb.register.getForwardUrl();var deferreds=_getSubmitSuccessDeferreds(forwardUrl,data);if(deferreds.length>0){$.when.apply($,deferreds).always(function(){window.location=forwardUrl});return}window.location=forwardUrl};_verifyInviteCode=function(formElement,callback){var code=$("#register-invite-code");var form=$(formElement);var spinner=$(".spinner.ajax-spinner",form);spinner.removeClass("hidden");if(code.val()){$.ajax({url:form.attr("action")+encodeURIComponent(code.val())+"/",async:false,success:function(data){if(data){if(data.success){code.attr("disabled",true);$('[name="invitecode"]').val(code.val())}else{form.validate().showErrors({invite_code:data&&data.message||""})}}if(callback){callback(data&&data.success||false)}},error:function(data){form.validate().showErrors({invite_code:data&&data.message||""});if(callback){callback(false)}},complete:function(){spinner.addClass("hidden")}})}else{form.validate().showErrors({invite_code:code.attr("data-msg-required")});spinner.addClass("hidden");if(callback){callback(false)}}};_getSubmitSuccessDeferreds=function(forwardUrl,data){var deferreds=[];if(forwardUrl.indexOf("webplayer")>-1){var tokenDfd=new jQuery.Deferred;deferreds.push(tokenDfd);_pollTokenService(tokenDfd)}if(data.callback_url){var campaignDfd=new jQuery.Deferred;deferreds.push(campaignDfd);$('<iframe height="0" width="0" style="display: none; visibility: hidden"></iframe>').attr("src",data.callback_url).appendTo("body").load(function(){campaignDfd.resolve()});setTimeout(function(){campaignDfd.reject()},5e3)}return deferreds};_pollTokenService=function(deferred,count,interval){interval=interval||0;count=!isNaN(count)?count:5;if(count<1){return deferred.resolve()}setTimeout(function(){$.ajax({type:"POST",dataType:"json",url:"/"+spweb.user.getMarket()+"/xhr/json/token.php",xhrFields:{withCredentials:true},success:function(data){if(typeof data!=="object"){return deferred.resolve()}if(data.status===1){return deferred.resolve()}count-=1;_pollTokenService(deferred,count,500)}})},interval)};_signupWithFacebook=function(){_formFacebook.showAjaxSpinner();spweb.fb.login(function(response){spweb.fb.api.api("/me",function(meResponse){if(!meResponse||meResponse.error){_formFacebook.hideAjaxSpinner();_formFacebook.showGeneralError();return}var displayname="";if(meResponse&&meResponse.name){displayname=meResponse.name}var postData={fb:response.authResponse.accessToken,id:response.authResponse.userID,name:displayname,email:meResponse.email,creation_flow:_formFacebook.form.find('input[name="creation_flow"]').val(),terms:"true",sp_csrf:_formFacebook.form.find('input[name="sp_csrf"]').val()};var inviteCodeField=$("#register-invite-code");if(inviteCodeField){postData["invite_code"]=inviteCodeField.val()}$.ajax({type:"POST",dataType:"json",url:"/"+spweb.user.getMarket()+"/xhr/json/sign-up-for-spotify-fb.php",xhrFields:{withCredentials:true},data:postData,success:function(data){_formFacebook.hideAjaxSpinner();if(typeof data==="object"&&data.status===130&&typeof data.redirect==="string"){window.location=data.redirect;return}if(typeof data==="object"&&data.status===1){$.publish("form_success."+_formFacebook.form.attr("id"),data)}else if(typeof data==="object"&&data.status===60){_formFacebook.showGeneralError(data.message);setTimeout(function(){window.location=config.www.host+"/login?continue="+spweb.register.getForwardUrl()},3500)}else{_formFacebook.showGeneralError()}},error:function(){_formFacebook.hideAjaxSpinner();_formFacebook.showGeneralError()}})})},function(){_formFacebook.hideAjaxSpinner();_formFacebook.showGeneralError()},{scope:config.facebook.scopes})};exports.init=function(){_forwardUrl=$("#register-forward-url").val();fb.connect();var formCodeElement=$("#js-code");if(formCodeElement.length){_formCode=new Form(formCodeElement);_formCode.init({submitHandler:function(element,event){event.preventDefault();event.stopImmediatePropagation()},errorClass:"has-error",errorPlacement:function(error,element){error.appendTo(element.closest("li"))}});$("#register-invite-code").blur(function(){_verifyInviteCode(formCodeElement)})}var registerFbElement=$("#js-register-with-facebook");if(registerFbElement.length>0){_formFacebook=new Form(registerFbElement);$.subscribe("form_success."+_formFacebook.form.attr("id"),function(e,data){_onAjaxSubmitSuccess(data,"facebook")});$.subscribe("form_error."+_formFacebook.form.attr("id"),function(){_formFacebook.showGeneralError()});_formFacebook.init({submitHandler:_signupWithFacebook,errorClass:"has-error",errorPlacement:function(error,element){error.appendTo(element.closest("li"))}})}_formEmail=new Form($("#js-register-with-email"));$.subscribe("form_success."+_formEmail.form.attr("id"),function(e,data){if(typeof data==="object"&&data.status===130&&typeof data.redirect==="string"){window.location=data.redirect;return}_onAjaxSubmitSuccess(data,"email")});$.subscribe("form_error."+_formEmail.form.attr("id"),function(){_formEmail.showGeneralError()});_formEmail.init({groups:{dob:"dob_month dob_day dob_year"},errorPlacement:function(error,element){error.appendTo(element.closest("li"))}});$(".js-signup-email-submit").bind("click",function(){var codeElement=$("#register-invite-code");if(codeElement.length&&!codeElement.is(":disabled")){_verifyInviteCode($("#js-code"),function(success){if(success){_formEmail.form.submit()}})}else{_formEmail.form.submit()}});$(".js-signup-fb").bind("click.signUp",function(ev){ev.preventDefault();ev.stopPropagation();var codeElement=$("#register-invite-code");if(codeElement.length&&!codeElement.is(":disabled")){_verifyInviteCode($("#js-code"),function(success){if(success){_formFacebook.form.submit()}})}else{_formFacebook.form.submit()}});this.init=Function("")};exports.getForwardUrl=function(){return _forwardUrl};exports.copyTermsField=function(){$("#register-terms").prop("checked",$("#register-terms-facebook").prop("checked"));var privacyCheckbox=$("#register-privacy");if(privacyCheckbox&&privacyCheckbox.length){privacyCheckbox.prop("checked",$("#register-privacy-facebook").prop("checked"))}};exports.goToSignup=function(e){var forwardUrl;e.preventDefault();forwardUrl=$(this).attr("href");if(forwardUrl[0]!=="/"){forwardUrl="/"+forwardUrl}window.location="/"+user.getMarket()+"/signup/?forward_url="+window.encodeURIComponent(window.location.origin+forwardUrl)};return exports}(jQuery,spweb.Form,spweb.device,spweb.user,spweb.fb,spweb.config,spweb.cookie);
spweb.login=function($,Form,fb,user,device,cookie,config,utils){var _formEmail,_formFacebook,_onAjaxSubmitSuccess,_forwardUrl,exports={};_onAjaxSubmitSuccess=function(data){if(typeof data!=="object"){_formEmail.showGeneralError();return}else if(data.msg!==""){_formEmail.showGeneralError(data.msg);return}else if(data.error){_formEmail.showGeneralError(data.error);return}$.publish("login_username_success");window.location.href="oauth_redirect"in data?data.oauth_redirect:spweb.login.getForwardUrl()};exports.init=function(){_forwardUrl=$("#login-forward-url").val();fb.connect();_formFacebook=new Form($("#js-login-form-facebook"));_formFacebook.init();_formEmail=new Form($("#js-login-form-email"));$.subscribe("form_success."+_formEmail.form.attr("id"),function(e,data){_onAjaxSubmitSuccess(data)});$.subscribe("form_error."+_formEmail.form.attr("id"),function(e){_formEmail.showGeneralError()});_formEmail.init();var prefillUsername=spweb.utils.getQueryParameter("prefill-username");if(prefillUsername&&prefillUsername.length&&isNaN(prefillUsername)){_formEmail.form.find("#login-username").val(prefillUsername)}$(".js-facebook-login").bind("click.signUp",function(ev){ev.preventDefault();_formFacebook.showAjaxSpinner();fb.login(function(response){window.location.href="/"+user.getMarket()+"/login/fb/?forward_url="+encodeURIComponent(_forwardUrl)},function(){_formFacebook.hideAjaxSpinner();_formFacebook.showGeneralError()},{scope:config.facebook.scopes})});this.init=Function("")};exports.getForwardUrl=function(){return _forwardUrl};exports.goToLogin=function(e){var forwardUrl;e.preventDefault();forwardUrl=$(this).attr("href");window.location=config.www.host+"/login/?continue="+window.encodeURIComponent(forwardUrl)};_setRedirectTimeout=function(forwardUrl){setTimeout(function(){window.location=forwardUrl},100)};exports.autologinAndRedirect=function(autologinUrl,loginUrl,signature,signatureExpiry){$("#autologin-modal").fadeIn();spweb.login.autoLogin(function(){spweb.login.loginAndRedirect(autologinUrl,loginUrl,signature,signatureExpiry)})};exports.autoLogin=function(callback){if(_allowDesktopRedirect()&&!_autoLoginDisabledByQuery()){var remote=new spweb.remotecontrol({token:spweb.config.autologin.remotetoken,pollClient:true,retryConnect:true,reconnectOnLogout:true,autoOpen:false});remote.connect().then(function(status){remote.getWebToken().then(function(response){if(response.web_token){spweb.config.autologin.token=response.web_token;if(callback){callback()}}},function(reason){if(callback){callback()}})},function(reason){if(callback){callback()}})}else{if(callback){callback()}}};exports.goToAutoLogin=function(e){var loginUrl=$(this).data("login-url");var autologinUrl=$(this).data("autologinUrl");var signature=$(this).data("signature");var signatureExpiry=$(this).data("signatureExpiry");_autoLoginAndRedirct(autologinUrl,loginUrl,signature,signatureExpiry,e)};exports.loginAndRedirect=function(autologinUrl,loginUrl,signature,signatureExpiry){_autoLoginAndRedirct(autologinUrl,loginUrl,signature,signatureExpiry,false)};_allowDesktopRedirect=function(){var desktop=device.isDesktop();var firefox=device.getBrowser()==="Firefox";var allowFirefox=desktop&&firefox&&spweb.config.autologin.desktop_firefox;var allowOthers=desktop&&!firefox&&spweb.config.autologin.desktop_others;return allowFirefox||allowOthers};_autoLoginDisabledByQuery=function(){return utils.getQueryParameter("aldisabled")==="1"};_autoLoginAndRedirct=function(autologinUrl,loginUrl,signature,signatureExpiry,event){var src="spotify://autologin?returnUrl="+window.encodeURIComponent(autologinUrl)+"&signature="+signature+"&signatureExpiry="+signatureExpiry;if(event){event.preventDefault();event.stopPropagation()}if(_autoLoginDisabledByQuery()){window.location=loginUrl;return}if(spweb.device.getOs()===spweb.device.OS_IOS&&spweb.config.autologin.ios){$("<iframe />").attr("src",src).hide().appendTo("body");_setRedirectTimeout(loginUrl)}else if(spweb.device.getOs()===spweb.device.OS_ANDROID&&spweb.config.autologin.android){window.location=src;_setRedirectTimeout(loginUrl)}else if(spweb.config.autologin.token&&_allowDesktopRedirect()){window.location=autologinUrl+"&"+spweb.config.autologin.token}else{window.location=loginUrl}};return exports}(jQuery,spweb.Form,spweb.fb,spweb.user,spweb.device,spweb.cookie,spweb.config,spweb.utils);
spweb.passwordChange=function($,Form){"use strict";var _form,_onAjaxSubmitSuccess,exports={};_onAjaxSubmitSuccess=function(data){if(data!==null&&typeof data==="object"){if(data.status==="success"){$("#js-password-form, #js-contact-support, #js-reset-title").hide();$("#js-password-updated").fadeIn().removeClass("hidden");$("#js-free-trial-banner").fadeIn().removeClass("hidden")}else if(data.status==="invalid_reset_token"){$("#js-password-form").hide();$("#js-invalid-reset-token").fadeIn().removeClass("hidden")}else if(data.status==="invalid_csrf_token"){$("#js-password-form").hide();$("#js-invalid-csrf-token").fadeIn().removeClass("hidden")}else{_form.showGeneralError(data.msg)}}else{_form.showGeneralError()}};exports.init=function(){_form=new Form($("#js-password-change-form"));$.subscribe("form_success."+_form.form.attr("id"),function(e,data){_onAjaxSubmitSuccess(data)});$.subscribe("form_error."+_form.form.attr("id"),function(){_form.showGeneralError()});_form.init();this.init=Function("")};return exports}(jQuery,spweb.Form);
spweb.passwordReset=function($,Form){"use strict";if($(".password-reset").data("nolink")===1){$(".primary").hide();$(".spotify-logo").removeAttr("href").click(function(e){e.preventDefault()})}var _form,_onAjaxSubmitSuccess,exports={};_onAjaxSubmitSuccess=function(data){if(typeof data==="object"){if(data.error!==true&&data.msg){$(".password-reset .msg").html(data.msg);$("#js-password-reset-form, .password-reset p").hide();$(".password-reset .msg").fadeIn()}else if(data.error===true&&data.msg){_form.showGeneralError(data.msg)}else if(data.error===true){_form.showGeneralError()}}else{_form.showGeneralError()}};exports.init=function(){_form=new Form($("#js-password-reset-form"));$.subscribe("form_success."+_form.form.attr("id"),function(e,data){_onAjaxSubmitSuccess(data)});$.subscribe("form_error."+_form.form.attr("id"),function(){_form.showGeneralError()});_form.init();this.init=Function("")};return exports}(jQuery,spweb.Form);
spweb.signUp=function($,fb,login,passwordReset,register){"use strict";var _options={startSection:"signup-select"},exports={};exports.init=function(options){$.extend(_options,options);fb.connect();register.init();login.init();passwordReset.init();this._initNavigation()};exports._initNavigation=function(){$(".sign-up.module").find(".js-link").on("click.signUp",exports._handleNavigationClick)};exports._handleNavigationClick=function(e){var section;e.preventDefault();e.stopPropagation();section=$(this).attr("data-section");exports.goToSection(section)};exports.goToSection=function(section,instant){section=section||_options.startSection;if(section){if($(".sign-up section.show").hasClass(section)){return}if(section==="register"){register.copyTermsField()}$(".sign-up section.show").slideUp(instant?0:null).removeClass("show");$(".sign-up section."+section+":hidden").slideDown(instant?0:null).addClass("show")}};return exports}(jQuery,spweb.fb,spweb.login,spweb.passwordReset,spweb.register);
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){(function(){"use strict";var hasWindow=typeof window!="undefined";var hasDefineProperty=typeof Object.defineProperty=="function";if(hasWindow&&window.__modDefFn){module.exports=window.__modDefFn;return}var deferred=[];var send;var origin;if(hasWindow&&window.postMessage){origin=window.location.origin||window.location.protocol+"//"+window.location.hostname;send=window.postMessage.bind(window,"@execute_deferreds",origin);if(!window.__hasDeferredHandler){if(hasDefineProperty){Object.defineProperty(window,"__hasDeferredHandler",{value:1})}else{window.__hasDeferredHandler=1}var handler=function(e){if(e.origin!=origin&&e.data!="@execute_deferreds"){return}executeDeferreds()};if(window.addEventListener){window.addEventListener("message",handler)}else{window.attachEvent("onmessage",handler)}}}else if(typeof setImmediate!="undefined"){send=setImmediate.bind(null,executeDeferreds)}else{send=setTimeout.bind(null,executeDeferreds,10)}function executeDeferreds(){var fns=deferred.splice(0);if(!fns.length)return;for(var i=0,l=fns.length;i<l;i++){try{fns[i]()}finally{null}}}var defer=function(fn){var trigger=!deferred.length;deferred.push(fn);if(trigger)send()};if(hasWindow&&!window.__modDefFn){if(hasDefineProperty){Object.defineProperty(window,"__modDefFn",{value:defer})}else{window.__modDefFn=defer}}module.exports=defer})()},{}],2:[function(require,module,exports){"use strict";var _defer=require("spotify-deferred");var EventHandlers;function Event(type,props){this.type=type;this._prevented=false;this._stopped=false;this._immediateStopped=false;if(props){for(var key in props){if(key=="type"){continue}this[key]=props[key]}}}Event.prototype.preventDefault=function(){this._prevented=true};Event.prototype.isDefaultPrevented=function(){return this._prevented};Event.prototype.stopPropagation=function(){this._stopped=true};Event.prototype.isPropagationStopped=function(){return this._stopped};Event.prototype.stopImmediatePropagation=function(){this._immediateStopped=true};Event.prototype.isImmediatePropagationStopped=function(){return this._immediateStopped};function EventEmitter(){this._listenerMap}EventEmitter.createEvent=function(type,opt_params){return new Event(type,opt_params)};EventEmitter.prototype.addListener=function(type,listener){var _listenerMap=this._listenerMap||(this._listenerMap={});var listeners=_listenerMap[type]||(_listenerMap[type]=[]);if(listeners.indexOf(listener)!=-1){return this}listeners.push(listener);return this};EventEmitter.prototype.addListeners=function(eventListeners){for(var type in eventListeners){this.addListener(type,eventListeners[type])}return this};EventEmitter.prototype.addOnceListener=function(type,listener){var wrapper=function(){this.removeListener(type,wrapper);return listener.apply(this,arguments)};this.addListener(type,wrapper);return wrapper};EventEmitter.prototype.removeListener=function(type,listener){var _listenerMap=this._listenerMap;var listeners=_listenerMap&&_listenerMap[type];if(!listeners){return this}var index=listeners.indexOf(listener);if(index==-1){return this}listeners.splice(index,1);if(!listeners.length){_listenerMap[type]=null}return this};EventEmitter.prototype.removeAllListeners=function(type){var _listenerMap=this._listenerMap;if(!_listenerMap){return this}_listenerMap[type]=null;return this};EventEmitter.prototype.removeListeners=function(eventListeners){for(var type in eventListeners){this.removeListener(type,eventListeners[type])}return this};EventEmitter.prototype.emit=function(type,opt_params){var event=new Event(type,opt_params);_defer(function(){this.emitEventSync(event)}.bind(this));return event};EventEmitter.prototype.emitEvent=function(event){_defer(function(){this.emitEventSync(event)}.bind(this));return event};EventEmitter.prototype.emitSync=function(type,opt_params){var event=new Event(type,opt_params);this.emitEventSync(event);return event};EventEmitter.prototype.emitEventSync=function(event){var type=event.type;var _listenerMap=this._listenerMap;var listeners=_listenerMap&&_listenerMap[type];if(!listeners||!listeners.length){return event}listeners=listeners.slice(0);for(var i=0,l=listeners.length;i<l;i++){listeners[i].call(this,event);if(event.isImmediatePropagationStopped()){break}}return event};EventEmitter.prototype.addEvent=function(type,listener){return this.addListener(type,listener)};EventEmitter.prototype.addEvents=function(eventListeners){return this.addListeners(eventListeners)};EventEmitter.prototype.addOnceEvent=function(type,listener){return this.addOnceListener(type,listener)};EventEmitter.prototype.removeEvent=function(type,listener){return this.removeListener(type,listener)};EventEmitter.prototype.removeEvents=function(eventListeners){return this.removeListeners(eventListeners)};EventEmitter.prototype.fireEvent=function(type,opt_args,opt_priority){if(opt_priority){this.fireEventSync(type,opt_args)}else{var self=this;_defer(function(){self.fireEventSync(type,opt_args)})}return this};EventEmitter.prototype.fireEventSync=function(type,opt_args){var self=this;var events=this._listenerMap&&this._listenerMap[type];if(!events||!events.length)return this;events=events.slice(0);var i,l;if(!opt_args){for(i=0,l=events.length;i<l;i++){events[i].call(self)}}else{if(!Array.isArray(opt_args)){opt_args=[opt_args]}for(i=0,l=events.length;i<l;i++){events[i].apply(self,opt_args)}}return this};EventEmitter.prototype.on=function(type,listener){return this.addEvent(type,listener)};EventEmitter.prototype.once=function(type,listener){return this.addOnceEvent(type,listener)};EventEmitter.prototype.off=function(type,opt_listener){if(typeof opt_listener==="function"){return this.removeEvent(type,opt_listener)}this._listenerMap[type]=null;return this};module.exports=EventEmitter},{"spotify-deferred":1}],3:[function(require,module,exports){"use strict";var inherit=function(Sub,Super){var superProto=Super.prototype;function Superclass(){}Superclass.prototype=Sub._super=superProto;Superclass.prototype.constructor=Super;Sub.prototype=new Superclass};module.exports=inherit},{}],4:[function(require,module,exports){arguments[4][1][0].apply(exports,arguments)},{dup:1}],5:[function(require,module,exports){"use strict";var slice=Array.prototype.slice;var defer=require("spotify-deferred");function pipe(promiseA,promiseB){promiseA.then(function(object){promiseB.fulfill(object)},function(error){promiseB.fail(error)})}var states={UNFULFILLED:0,FULFILLED:1,FAILED:2};function Promise(){this._state=states.UNFULFILLED;this._value=null;this._handlers=[];this._deferred=false}Promise.defer=typeof setImmediate=="function"?function(fn){setImmediate(fn)}:defer;Promise.prototype.isUnfulfilled=function(){return this._state==states.UNFULFILLED};Promise.prototype.isFulfilled=function(){return this._state==states.FULFILLED};Promise.prototype.isFailed=function(){return this._state==states.FAILED};Promise.prototype.fulfill=function(value){var self=this;if(this._state!==states.UNFULFILLED)return;this._value=value;this._state=states.FULFILLED;if(!this._deferred){Promise.defer(function(){self._runHandlers()});this._deferred=true}return};Promise.prototype.fail=function(error){var self=this;if(this._state!==states.UNFULFILLED)return;this._value=error;this._state=states.FAILED;if(!this._deferred){Promise.defer(function(){self._runHandlers()});this._deferred=true}return};Promise.prototype.then=function(fulfilledHandler,failedHandler){var self=this;var promise=new Promise;this._handlers.push({fulfilled:fulfilledHandler,failed:failedHandler,promise:promise});if(this._state!==states.UNFULFILLED&&!this._deferred){Promise.defer(function(){self._runHandlers()});this._deferred=true}return promise};Promise.prototype.pipe=function(promise){this.then(function(value){promise.fulfill(value)},function(error){promise.fail(error)});return};Promise.prototype._runHandlers=function(){this._deferred=false;var value=this._value;if(this._state==states.UNFULFILLED)return;var fulfilled=this._state===states.FULFILLED;var handlers=this._handlers.splice(0);var callbackType=fulfilled?"fulfilled":"failed";for(var i=0,l=handlers.length;i<l;i++){var handler=handlers[i];var callback=handler[callbackType];var promise=handler.promise;if(!callback||typeof callback!="function"){if(value&&typeof value.then=="function"){pipe(value,promise);continue}else{if(fulfilled){promise.fulfill(value)}else{promise.fail(value)}continue}}try{var returnValue=callback(value)}catch(e){promise.fail(e);continue}if(returnValue&&typeof returnValue.then=="function"){pipe(returnValue,promise)}else{promise.fulfill(returnValue)}}};Promise.prototype.catchError=function(failedHandler){return this.then(null,failedHandler)};Promise.prototype.get=function(property){var promise=new Promise;this.then(function(object){if(property in object){promise.fulfill(object[property])}else{promise.fail(new TypeError('No property "'+property+'" in object.'))}},function(error){promise.fail(error)});return promise};Promise.prototype.access=function(var_args){var_args=Array.isArray(var_args)?var_args:slice.call(arguments);var promise=this;for(var i=0,l=var_args.length;i<l;i++){promise=promise.get(var_args[i])}return promise};Promise.prototype.call=function(method,var_args){var args=slice.call(arguments,1);var promise=new Promise;this.then(function(object){try{promise.fulfill(object[method].apply(object,args))}catch(e){promise.fail(e)}},function(error){promise.fail(error)});return promise};Promise.prototype.thenSpread=function(fulfilledHandler,failedHandler){return this.then(function(value){return Array.isArray(value)?fulfilledHandler.apply(this,value):fulfilledHandler.call(this,value)},failedHandler)};Promise.join=function(promises){promises=Array.isArray(promises)?promises:slice.call(arguments);var promise=new Promise;var length=promises.length;var result=[];var failed=false;var aggregator=function(index,obj){if(failed)return;result[index]=obj;length--;if(!length)promise.fulfill(result)};var failure=function(error){if(failed)return;failed=true;promise.fail(error)};for(var i=0,l=length;i<l;i++){var p=promises[i];if(!p||!p.then){aggregator(i,p)}else{p.then(aggregator.bind(null,i),failure)}}return promise};Promise.group=function(promises){promises=Array.isArray(promises)?promises:slice.call(arguments);var promise=new Promise;for(var i=0,l=promises.length;i<l;i++){promise.pipe(promises[i])}return promise};module.exports=Promise},{"spotify-deferred":4}],6:[function(require,module,exports){"use strict";var inherit=require("spotify-inheritance/inherit");var EventEmitter=require("spotify-eventemitter");var Promise=require("spotify-promise");function RemoteControl(settings,win){if(!this instanceof RemoteControl){return new RemoteControl(options)}EventEmitter.call(this);settings=settings||{};this._win=win||window;this._protocol=settings.protocol||this._win.location.protocol;this._csrf="";if(settings.debug){this._startPort=this._endPort=settings.port}else{this._startPort="https:"===this._protocol?4370:4380;this._endPort="https:"===this._protocol?4379:4389}this._currentPort=this._startPort;this._runningPort=0;this._subdomain="";this._clientOpen=false;this._clientRunning=false;this._connected=false;this._backoffIndex=0;this.state=null;if(settings.hasOwnProperty("autoOpen")){this._autoOpen=settings.autoOpen}else{this._autoOpen=false}this._retryConnect=settings.retryConnect||false;this._reconnectOnLogout=settings.reconnectOnLogout||false;this._reopenOnReconnect=settings.reopenOnReconnect||false;this._localhost=settings.debug||settings.localhost||false;this._pollClient=settings.pollClient||false;this._pollBackoff=settings.pollBackoff||[1,1,1,1,3,3,5];this._longPollingTime=settings.longPollingTime||6e4;this._token=settings.token||"";this._referrer=settings.referrer||this._win.location.href}inherit(RemoteControl,EventEmitter);module.exports=RemoteControl;var Event={STATUS_CHANGE:"STATUS_CHANGE",CONNECTION_ESTABLISHED:"CONNECTION_ESTABLISHED",CONNECTION_FAILED:"CONNECTION_FAILED"};RemoteControl.Event=Event;var Error={INVALID_OAUTH_TOKEN:"4102",EXPIRED_OAUTH_TOKEN:"4103",INVALID_CSRF_TOKEN:"4107",OAUTH_TOKEN_INVALID_FOR_USER:"4108",NO_USER_LOGGED_IN:"4110",COULD_NOT_DETECT_PORT:"6000",COULD_NOT_OPEN_CLIENT:"6010",COULD_NOT_FETCH_CSRF_TOKEN:"6020",COULD_NOT_FETCH_STATUS:"6030",COULD_NOT_PLAY_TRACK:"6040",NO_TRACK_LOADED:"6050",CORS_REQUESTS_DISABLED:"6060",REQUEST_TIMED_OUT:"6061"};RemoteControl.Error=Error;RemoteControl.prototype.isCurrent=function(uri){var state=this.state;return state!==null&&state.track&&state.track.track_resource&&state.track.track_resource.uri==uri};RemoteControl.prototype.enabled=function(){return this._runningPort>0};RemoteControl.prototype._detectPort=function(promise){promise=promise||new Promise;if(0<this._runningPort){promise.fulfill(this._runningPort)}else{var self=this;var url=this._buildUrl("service/version.json",{service:"remote"});self._request(url,function(err,result){if(err){if(self._currentPort<self._endPort){self._currentPort++;self._detectPort(promise)}else if(self._pollClient){self._currentPort=self._startPort;setTimeout(function(){self._detectPort(promise)},self._nextPollInterval()*1e3)}else{promise.fail({type:Error.COULD_NOT_DETECT_PORT,message:"Could not detect any port"})}}else{self._resetBackoffCounter();self._runningPort=self._currentPort;self._clientRunning=true;self._clientOpen=result.running!==false;promise.fulfill(self._currentPort)}})}return promise};RemoteControl.prototype._openClient=function(){var self=this;var promise=new Promise;if(self._clientOpen){promise.fulfill()}else if(self._autoOpen){var url=self._buildUrl("remote/open.json");self._request(url,function(err,result){if(err){promise.fail({type:Error.COULD_NOT_OPEN_CLIENT,message:"Could not open client"})}else{if(!result.running){promise.fail({type:Error.COULD_NOT_OPEN_CLIENT,message:"Could not open client"})}else{self._clientOpen=true;promise.fulfill()}}},1e4)}else{promise.fulfill()}return promise};RemoteControl.prototype._csrfToken=function(){var self=this;var promise=new Promise;if(""!==self._csrf){promise.fulfill(self._csrf)}else{var url=self._buildUrl("simplecsrf/token.json");self._request(url,function(err,result){if(err){promise.fail({type:Error.COULD_NOT_FETCH_CSRF_TOKEN,message:"Could not fetch csrf token"})}else{if(!result.token){promise.fail({type:Error.COULD_NOT_FETCH_CSRF_TOKEN,message:"Could not fetch csrf token"})}else{self._csrf=result.token;promise.fulfill(result.token)}}})}return promise};RemoteControl.prototype._status=function(longPolling,callback,timeout){var self=this;var params={csrf:self._csrf,oauth:self._token};timeout=timeout||500;if(longPolling){params["returnon"]="login,logout,play,pause,error,ap";params["returnafter"]=timeout/1e3}var url=self._buildUrl("remote/status.json",params);this._request(url,function(err,result){if(err){var type=err.type||Error.COULD_NOT_FETCH_STATUS;callback({type:type,message:"Could not fetch status"})}else{if(result.error){if(result.running===false){self._clientOpen=false}callback(result.error)}else{callback(null,result)}}},timeout+1e3)};RemoteControl.prototype._statusChange=function(){var self=this;this._status(true,function(err,status){if(err){err.code=err.code||err.type;switch(err.code){case Error.NO_USER_LOGGED_IN:self._connected=false;self._connection=null;if(self._reconnectOnLogout){self._reconnect()}self.emit(Event.CONNECTION_FAILED,err);break;case Error.INVALID_OAUTH_TOKEN:case Error.EXPIRED_OAUTH_TOKEN:case Error.OAUTH_TOKEN_INVALID_FOR_USER:self._token="";self._connected=false;self._connection=null;self.emit(Event.CONNECTION_FAILED,err);break;case Error.INVALID_CSRF_TOKEN:self._csrf="";self._csrfToken().then(function(){self._statusChange();return});break;default:self._connected=false;self._connection=null;self.emit(Event.CONNECTION_FAILED,err);break}}else{self._statusChange();self.state=status;self.emit(Event.STATUS_CHANGE,status)}},self._longPollingTime)};RemoteControl.prototype._connect=function(){var self=this;var promise=new Promise;if(self._connected){promise.fulfill(self.state)}else{self._status(false,function(err,status){if(err){switch(err.type){case Error.NO_USER_LOGGED_IN:if(self._retryConnect){setTimeout(function(){self._reconnect().then(function(status){promise.fulfill(status)})},self._nextPollInterval()*1e3)}else{promise.fail(err)}break;default:promise.fail(err);break}}else{self._resetBackoffCounter();self._connected=true;self.state=status;self._statusChange();promise.fulfill(status)}})}return promise};RemoteControl.prototype.connect=function(){var self=this;if(!this._connection){this._connection=this._detectPort().then(function(){return self._openClient()}).then(function(){return self._csrfToken()}).then(function(){return self._connect()})}return this._connection.then(function(status){return self.state||status})};RemoteControl.prototype._reconnect=function(){var self=this;return this._detectPort().then(function(){if(self._reopenOnReconnect){return self._openClient()}else{return self}}).then(function(){return self._csrfToken()}).then(function(){return self._connect()})};RemoteControl.prototype.setToken=function(token){this._token=token};RemoteControl.prototype.play=function(context,trackUri){var self=this;var playPromise=this._playPromise&&this._connection?this._playPromise:this.connect();return this._playPromise=playPromise.then(function(status){var params={csrf:self._csrf,oauth:self._token,context:context};params["uri"]=trackUri||context;var promise=new Promise;var url=self._buildUrl("remote/play.json",params);self._request(url,function(err,result){if(err){var type=err.type||Error.COULD_NOT_PLAY_TRACK;promise.fulfill()}else{if(result.error){promise.fulfill()}else{self.state=result;self.emit(Event.STATUS_CHANGE,result);promise.fulfill(result)}}});return promise},function(error){self._playPromise=null;throw error})};RemoteControl.prototype._pause=function(pause){var promise=new Promise;var params={csrf:this._csrf,oauth:this._token,pause:pause===true?"true":"false"};var url=this._buildUrl("remote/pause.json",params);this._request(url,function(err,result){if(err){var type=err.type||Error.COULD_NOT_TOGGLE_PLAYBACK;promise.fail({type:type,message:"Could not toggle playback"})}else{if(result.error){promise.fail(result.error)}else{promise.fulfill(result)}}});return promise};RemoteControl.prototype.pause=function(){var self=this;return this.connect().then(function(status){var promise=new Promise;if(!status.track||!status.track.track_resource||!status.track.track_resource.uri){promise.fail({type:Error.NO_TRACK_LOADED,message:"Could not pause non existing track"})}else{self._pause(true).then(function(pauseStatus){promise.fulfill(pauseStatus)})}return promise})};RemoteControl.prototype.toggle=function(){var self=this;return this.connect().then(function(status){var promise=new Promise;if(!status.track||!status.track.track_resource||!status.track.track_resource.uri){promise.fail({type:Error.NO_TRACK_LOADED,message:"Could not toggle playback for non existing track"})}else{self._pause(status.playing).then(function(pauseStatus){promise.fulfill(pauseStatus)})}return promise})};RemoteControl.prototype.getWebToken=function(){var self=this;return this.connect().then(function(status){var params={csrf:self._csrf,oauth:self._token};var promise=new Promise;var url=self._buildUrl("remote/webtoken.json",params);self._request(url,function(err,result){if(err){promise.fail({type:Error.COULD_NOT_BROWSE_TO_CONTEXT,message:"Could not get web token"})}else{if(result.error){promise.fail(result.error)}else{promise.fulfill(result)}}});return promise},function(error){throw error})};RemoteControl.prototype._baseUrl=function(){if(this._localhost){return"//localhost"}var min=97;var max=122;if(""===this._subdomain){for(var i=0;i<10;++i){this._subdomain+=String.fromCharCode(Math.floor(Math.random()*(max-min+1))+min)}}return"//"+this._subdomain+".spotilocal.com"};RemoteControl.prototype._request=function(url,callback,timeout){var self=this;function getXdr(){if("undefined"!==typeof self._win.XDomainRequest){return new self._win.XDomainRequest}else if("undefined"!==typeof self._win.XMLHttpRequest){return new self._win.XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return null}var xdr=getXdr();if(xdr){xdr.onload=function(){var data=xdr.responseText;data=JSON.parse(data);callback(null,data)};xdr.onerror=function(){callback({type:xdr.status,message:"Request error"})};xdr.ontimeout=function(){callback({type:Error.REQUEST_TIMED_OUT,message:"Request timed out"})};xdr.onprogress=function(){};xdr.open("GET",url);xdr.timeout=timeout?timeout:5e3;xdr.send()}else{callback({type:Error.CORS_REQUESTS_DISABLED,message:"CORS Requests are not enabled"})}};RemoteControl.prototype._buildUrl=function(endpoint,params){params=params||{};params.cors="";params.ref=params.ref||this._referrer;var queryParams=this._buildQuery(params);return this._baseUrl()+":"+this._currentPort+"/"+endpoint+"?"+queryParams};RemoteControl.prototype._buildQuery=function(params){var query=[];for(var key in params){query.push(encodeURIComponent(key)+"="+encodeURIComponent(params[key]))}return query.join("&")};RemoteControl.prototype._nextPollInterval=function(){var interval=this._pollBackoff[this._backoffIndex];if(this._pollBackoff[this._backoffIndex+1]){this._backoffIndex++}return interval};RemoteControl.prototype._resetBackoffCounter=function(){this._backoffIndex=0}},{"spotify-eventemitter":2,"spotify-inheritance/inherit":3,"spotify-promise":5}],7:[function(require,module,exports){spweb.remotecontrol=require("spotify-remote")},{"spotify-remote":6}]},{},[7]);
jQuery(function($,FastClick,spweb){"use strict";var body=$("body");if(typeof FastClick==="function"){spweb.fastClick=FastClick.attach(document.body)}spweb.securityMonitor.init();spweb.navbar.init();spweb.messageBars.init();spweb.analytics.init();spweb.tracking.init();if(spweb.device.getBrowser()==="IE"&&spweb.device.getBrowserVersion()===8){$("html").addClass("ie8")}if(spweb.user.getMarket()!=="int"&&!spweb.device.isMobile()&&$(".reboot.is-loggedout").length>0){$(".js-goto-signup").on("click.register",spweb.register.goToSignup)}if(spweb.user.getMarket()!=="int"&&$(".reboot.is-loggedout").length>0){$(".js-goto-auto-login").on("click.login",spweb.login.goToAutoLogin);if($(".js-goto-auto-login").length>0){spweb.login.autoLogin()}}if($(".page-signup").length>0){spweb.register.init()}if($(".page-login, .page-service-login").length>0){spweb.login.init()}if($(".page-password-reset").length>0){spweb.passwordReset.init()}if($("body").hasClass("page-signup-for-spotify")){spweb.signUp.init();spweb.signUp.goToSection("signup-select",true)}if(body.hasClass("page-password-change")){spweb.passwordChange.init()}}(jQuery,FastClick,spweb));